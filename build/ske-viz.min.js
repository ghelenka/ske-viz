!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("ske-viz",[],n):"object"==typeof exports?exports["ske-viz"]=n():t["ske-viz"]=n()}(window,function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=8)}([function(t,n,e){n.Intersection=e(29),n.IntersectionArgs=e(5),n.Shapes=e(35),n.AffineShapes=e(36),n.IntersectionQuery=e(37),n.Point2D=e(1).Point2D,n.Vector2D=e(1).Vector2D,n.Matrix2D=e(1).Matrix2D},function(t,n,e){n.Point2D=e(30),n.Vector2D=e(31),n.Matrix2D=e(32)},function(t,n,e){var r=e(3),i=0;t.exports=function(t){var n=++i;return r(t)+n}},function(t,n,e){var r=e(14);t.exports=function(t){return null==t?"":r(t)}},function(t,n,e){var r=e(15).Symbol;t.exports=r},function(t,n,e){function r(t,n){this.init(t,n)}r.prototype.init=function(t,n){this.name=t,this.args=n},t.exports=r},function(t,n,e){var r=e(9)(function(t,n,e){return t+(e?"-":"")+n.toLowerCase()});t.exports=r},function(t,n,e){function r(){this.init(arguments)}
/**
 *
 *   Polynomial.js
 *
 *   copyright 2002, 2013 Kevin Lindsey
 * 
 *   contribution {@link http://github.com/Quazistax/kld-polynomial}
 *       @copyright 2015 Robert Benko (Quazistax) <quazistax@gmail.com>
 *       @license MIT
 */r.TOLERANCE=1e-6,r.ACCURACY=15,r.interpolate=function(t,n,e,r,i){if(t.constructor!==Array||n.constructor!==Array)throw new Error("Polynomial.interpolate: xs and ys must be arrays");if(isNaN(e)||isNaN(r)||isNaN(i))throw new Error("Polynomial.interpolate: n, offset, and x must be numbers");for(var o=0,a=0,u=new Array(e),s=new Array(e),c=0,h=Math.abs(i-t[r]),l=0;l<e;l++){var f=Math.abs(i-t[r+l]);f<h&&(c=l,h=f),u[l]=s[l]=n[r+l]}o=n[r+c],c--;for(var y=1;y<e;y++){for(l=0;l<e-y;l++){var p=t[r+l]-i,d=t[r+l+y]-i,x=u[l+1]-s[l],v=p-d;if(0==v)throw new Error("Unable to interpolate polynomial. Two numbers in n were identical (to within roundoff)");v=x/v,s[l]=d*v,u[l]=p*v}o+=a=2*(c+1)<e-y?u[c+1]:s[c--]}return{y:o,dy:a}},r.prototype.init=function(t){this.coefs=new Array;for(var n=t.length-1;n>=0;n--)this.coefs.push(t[n]);this._variable="t",this._s=0},r.prototype.eval=function(t){if(isNaN(t))throw new Error("Polynomial.eval: parameter must be a number");for(var n=0,e=this.coefs.length-1;e>=0;e--)n=n*t+this.coefs[e];return n},r.prototype.add=function(t){for(var n=new r,e=this.getDegree(),i=t.getDegree(),o=Math.max(e,i),a=0;a<=o;a++){var u=a<=e?this.coefs[a]:0,s=a<=i?t.coefs[a]:0;n.coefs[a]=u+s}return n},r.prototype.multiply=function(t){for(var n=new r,e=0;e<=this.getDegree()+t.getDegree();e++)n.coefs.push(0);for(e=0;e<=this.getDegree();e++)for(var i=0;i<=t.getDegree();i++)n.coefs[e+i]+=this.coefs[e]*t.coefs[i];return n},r.prototype.divide_scalar=function(t){for(var n=0;n<this.coefs.length;n++)this.coefs[n]/=t},r.prototype.simplify=function(t){void 0===t&&(t=1e-12);for(var n=this.getDegree();n>=0&&Math.abs(this.coefs[n])<=t;n--)this.coefs.pop()},r.prototype.bisection=function(t,n){var e,i=this.eval(t),o=this.eval(n);if(Math.abs(i)<=r.TOLERANCE)e=t;else if(Math.abs(o)<=r.TOLERANCE)e=n;else if(i*o<=0)for(var a=Math.log(n-t),u=Math.LN10*r.ACCURACY,s=Math.ceil((a+u)/Math.LN2),c=0;c<s;c++){e=.5*(t+n);var h=this.eval(e);if(Math.abs(h)<=r.TOLERANCE)break;h*i<0?(n=e,o=h):(t=e,i=h)}return e},r.prototype.toString=function(){for(var t=new Array,n=new Array,e=this.coefs.length-1;e>=0;e--){var r=Math.round(1e3*this.coefs[e])/1e3;if(0!=r){var i=r<0?" - ":" + ";r=Math.abs(r),e>0&&(1==r?r=this._variable:r+=this._variable),e>1&&(r+="^"+e),n.push(i),t.push(r)}}n[0]=" + "==n[0]?"":"-";var o="";for(e=0;e<t.length;e++)o+=n[e]+t[e];return o},r.prototype.trapezoid=function(t,n,e){if(isNaN(t)||isNaN(n)||isNaN(e))throw new Error("Polynomial.trapezoid: parameters must be numbers");var r=n-t;if(1==e){var i=this.eval(t),o=this.eval(n);this._s=.5*r*(i+o)}else{for(var a=1<<e-2,u=r/a,s=t+.5*u,c=0,h=0;h<a;h++)c+=this.eval(s),s+=u;this._s=.5*(this._s+r*c/a)}if(isNaN(this._s))throw new Error("Polynomial.trapezoid: this._s is NaN");return this._s},r.prototype.simpson=function(t,n){if(isNaN(t)||isNaN(n))throw new Error("Polynomial.simpson: parameters must be numbers");for(var e=n-t,r=.5*e*(this.eval(t)+this.eval(n)),i=r,o=4*r/3,a=o,u=r,s=1,c=2;c<=20;c++){for(var h=e/s,l=t+.5*h,f=0,y=1;y<=s;y++)f+=this.eval(l),l+=h;if(o=(4*(r=i=.5*(i+e*f/s))-u)/3,Math.abs(o-a)<1e-7*Math.abs(a))break;a=o,u=r,s<<=1}return o},r.prototype.romberg=function(t,n){if(isNaN(t)||isNaN(n))throw new Error("Polynomial.romberg: parameters must be numbers");var e=new Array(21),i=new Array(21),o={y:0,dy:0};i[0]=1;for(var a=1;a<=20&&(e[a-1]=this.trapezoid(t,n,a),!(a>=3&&(o=r.interpolate(i,e,3,a-3,0),Math.abs(o.dy)<=1e-6*o.y)));a++)e[a]=e[a-1],i[a]=.25*i[a-1];return o.y},r.prototype.getDegree=function(){return this.coefs.length-1},r.prototype.getDerivative=function(){for(var t=new r,n=1;n<this.coefs.length;n++)t.coefs.push(n*this.coefs[n]);return t},r.prototype.getRoots=function(){var t;switch(this.simplify(),this.getDegree()){case 0:t=[];break;case 1:t=this.getLinearRoot();break;case 2:t=this.getQuadraticRoots();break;case 3:t=this.getCubicRoots();break;case 4:t=this.getQuarticRoots();break;default:t=[]}return t},r.prototype.getRootsInInterval=function(t,n){var e,r=new Array;if(1==this.getDegree())null!=(e=this.bisection(t,n))&&r.push(e);else{var o=this.getDerivative().getRootsInInterval(t,n);if(o.length>0){for(null!=(e=this.bisection(t,o[0]))&&r.push(e),i=0;i<=o.length-2;i++)null!=(e=this.bisection(o[i],o[i+1]))&&r.push(e);null!=(e=this.bisection(o[o.length-1],n))&&r.push(e)}else null!=(e=this.bisection(t,n))&&r.push(e)}return r},r.prototype.getLinearRoot=function(){var t=[],n=this.coefs[1];return 0!=n&&t.push(-this.coefs[0]/n),t},r.prototype.getQuadraticRoots=function(){var t=[];if(2==this.getDegree()){var n=this.coefs[2],e=this.coefs[1]/n,r=e*e-this.coefs[0]/n*4;if(r>0){var i=Math.sqrt(r);t.push(.5*(-e+i)),t.push(.5*(-e-i))}else 0==r&&t.push(.5*-e)}return t},r.prototype.getCubicRoots=function(){var t=[];if(3==this.getDegree()){var n=this.coefs[3],e=this.coefs[2]/n,r=this.coefs[1]/n,i=(3*r-e*e)/3,o=(2*e*e*e-9*r*e+this.coefs[0]/n*27)/27,a=e/3,u=o*o/4+i*i*i/27,s=o/2,c=this.zeroErrorEstimate();if(Math.abs(u)<=c&&(u=0),u>0){var h,l=Math.sqrt(u);h=(v=-s+l)>=0?Math.pow(v,1/3):-Math.pow(-v,1/3),(v=-s-l)>=0?h+=Math.pow(v,1/3):h-=Math.pow(-v,1/3),t.push(h-a)}else if(u<0){var f=Math.sqrt(-i/3),y=Math.atan2(Math.sqrt(-u),-s)/3,p=Math.cos(y),d=Math.sin(y),x=Math.sqrt(3);t.push(2*f*p-a),t.push(-f*(p+x*d)-a),t.push(-f*(p-x*d)-a)}else{var v;v=s>=0?-Math.pow(s,1/3):Math.pow(-s,1/3),t.push(2*v-a),t.push(-v-a)}}return t};var o=function(t){return"number"==typeof t?t?t<0?-1:1:t==t?t:NaN:NaN};r.prototype.getQuarticRoots=function(){var t=[],n=this.getDegree();if(4==n){var e=new r;e.coefs=this.coefs.slice(),e.divide_scalar(e.coefs[n]),Math.abs(e.coefs[0])<10*1e-15*Math.abs(e.coefs[3])&&(e.coefs[0]=0);var i,a=e.getDerivative(),u=a.getRoots().sort(function(t,n){return t-n}),s=[],c=u.length-1,h=this.bounds();maxabsX=Math.max(Math.abs(h.minX),Math.abs(h.maxX));var l=this.zeroErrorEstimate(maxabsX);for(i=0;i<=c;i++)s.push(e.eval(u[i]));for(i=0;i<=c;i++)Math.abs(s[i])<l&&(s[i]=0);i=0;var f=Math.max(.1*(h.maxX-h.minX)/n,1e-15),y=[],p=[];if(c>-1){for(0!=s[0]?o(s[0])!=o(e.eval(u[0]-f)-s[0])&&(y.push(u[0]-f),p.push([h.minX,u[0]])):(t.push(u[0],u[0]),i++);i<c;i++)0==s[i+1]?(t.push(u[i+1],u[i+1]),i++):o(s[i])!=o(s[i+1])&&(y.push((u[i]+u[i+1])/2),p.push([u[i],u[i+1]]));0!=s[c]&&o(s[c])!=o(e.eval(u[c]+f)-s[c])&&(y.push(u[c]+f),p.push([u[c],h.maxX]))}var d=function(t){return e.eval(t)},x=function(t){return a.eval(t)};if(y.length>0)for(i=0;i<y.length;i++)y[i]=r.newton_secant_bisection(y[i],d,x,32,p[i][0],p[i][1]);t=t.concat(y)}return t},r.prototype.zeroErrorEstimate=function(t){if(void 0===t){var n=this.bounds();t=Math.max(Math.abs(n.minX),Math.abs(n.maxX))}if(t<.001)return 2*Math.abs(this.eval(1e-15));var e=this.coefs.length-1,r=this.coefs[e];return 10*1e-15*this.coefs.reduce(function(n,e,i){var o=e/r*Math.pow(t,i);return o>n?o:n},0)},r.prototype.bounds_UpperReal_Fujiwara=function(){var t=this.coefs,n=t.length-1,e=t[n];1!=e&&(t=this.coefs.map(function(t){return t/e}));var r,i=t.map(function(t,e){return e<n?Math.pow(Math.abs(0==e?t/2:t),1/(n-e)):t}),o=function(t,n,e){return r(e)&&(t.max<n?(t.nearmax=t.max,t.max=n):t.nearmax<n&&(t.nearmax=n)),t};r=function(e){return e<n&&t[e]<0};var a=i.reduce(o,{max:0,nearmax:0});return r=function(e){return e<n&&(n%2==e%2?t[e]<0:t[e]>0)},{negX:-2*i.reduce(o,{max:0,nearmax:0}).max,posX:2*a.max}},r.prototype.bounds_LowerReal_Fujiwara=function(){var t=new r;t.coefs=this.coefs.slice().reverse();var n=t.bounds_UpperReal_Fujiwara();return n.negX=1/n.negX,n.posX=1/n.posX,n},r.prototype.bounds=function(){var t=this.bounds_UpperReal_Fujiwara(),n={minX:t.negX,maxX:t.posX};return 0===t.negX&&0===t.posX?n:(0===t.negX?n.minX=this.bounds_LowerReal_Fujiwara().posX:0===t.posX&&(n.maxX=this.bounds_LowerReal_Fujiwara().negX),n.minX>n.maxX&&(n.minX=n.maxX=0),n)},r.newton_secant_bisection=function(t,n,e,r,i,a){var u,s,c,h,l,f,p=0,d=0;u=t;var x=Math.pow(10,-14),v="number"==typeof i&&"number"==typeof a;if(v){if(i>a)throw new Error("newton root finding: min must be greater than max");if(l=n(i),f=n(a),o(l)==o(f))throw new Error("newton root finding: y values of bounds must be of opposite sign")}var g,_=function(){return Math.abs(c)<=x*Math.abs(u)||d==u-c-u};for(g=0;g<r;g++){if(0==(s=e(u))){if(0==p)throw new Error("newton root finding: df(x) is zero");s=p}if(p=s,y=n(u),c=y/s,h=u-c,_())break;if(v){if(o(y)==o(f))a=u,f=y;else{if(o(y)!=o(l)){u=h;break}i=u,l=y}if(h<i||h>a){if(o(l)==o(f))break;var m=f-l,w=a-i;if(c=0==m?u-(i+.5*w):Math.abs(m/Math.min(l,f))>50?u-(i+w*(.5+(Math.abs(l)<Math.abs(f)?-.25:.25))):u-(i-l/m*w),h=u-c,_())break}}d=u-h,u=h}return u},t.exports=r},function(t,n,e){t.exports=e(38)},function(t,n,e){var r=e(10),i=e(11),o=e(25),a=RegExp("['’]","g");t.exports=function(t){return function(n){return r(o(i(n).replace(a,"")),t,"")}}},function(t,n){t.exports=function(t,n,e,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(e=t[++i]);++i<o;)e=n(e,t[i],i,t);return e}},function(t,n,e){var r=e(12),i=e(3),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");t.exports=function(t){return(t=i(t))&&t.replace(o,r).replace(a,"")}},function(t,n,e){var r=e(13)({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"});t.exports=r},function(t,n){t.exports=function(t){return function(n){return null==t?void 0:t[n]}}},function(t,n,e){var r=e(4),i=e(18),o=e(19),a=e(20),u=r?r.prototype:void 0,s=u?u.toString:void 0;t.exports=function t(n){if("string"==typeof n)return n;if(o(n))return i(n,t)+"";if(a(n))return s?s.call(n):"";var e=n+"";return"0"==e&&1/n==-1/0?"-0":e}},function(t,n,e){var r=e(16),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,n,e){(function(n){var e="object"==typeof n&&n&&n.Object===Object&&n;t.exports=e}).call(this,e(17))},function(t,n){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,n){t.exports=function(t,n){for(var e=-1,r=null==t?0:t.length,i=Array(r);++e<r;)i[e]=n(t[e],e,t);return i}},function(t,n){var e=Array.isArray;t.exports=e},function(t,n,e){var r=e(21),i=e(24);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},function(t,n,e){var r=e(4),i=e(22),o=e(23),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},function(t,n,e){var r=e(4),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,u=r?r.toStringTag:void 0;t.exports=function(t){var n=o.call(t,u),e=t[u];try{t[u]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(n?t[u]=e:delete t[u]),i}},function(t,n){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},function(t,n){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,n,e){var r=e(26),i=e(27),o=e(3),a=e(28);t.exports=function(t,n,e){return t=o(t),void 0===(n=e?void 0:n)?i(t)?a(t):r(t):t.match(n)||[]}},function(t,n){var e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;t.exports=function(t){return t.match(e)||[]}},function(t,n){var e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;t.exports=function(t){return e.test(t)}},function(t,n){var e="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",r="["+e+"]",i="\\d+",o="[a-z\\xdf-\\xf6\\xf8-\\xff]",a="[^\\ud800-\\udfff"+e+i+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",c="[A-Z\\xc0-\\xd6\\xd8-\\xde]",h="(?:"+o+"|"+a+")",l="(?:"+c+"|"+a+")",f="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",y="[\\ufe0e\\ufe0f]?"+f+"(?:\\u200d(?:"+["[^\\ud800-\\udfff]",u,s].join("|")+")[\\ufe0e\\ufe0f]?"+f+")*",p="(?:"+["[\\u2700-\\u27bf]",u,s].join("|")+")"+y,d=RegExp([c+"?"+o+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[r,c,"$"].join("|")+")",l+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[r,c+h,"$"].join("|")+")",c+"?"+h+"+(?:['’](?:d|ll|m|re|s|t|ve))?",c+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",i,p].join("|"),"g");t.exports=function(t){return t.match(d)||[]}},function(t,n,e){var r=e(1).Point2D,i=e(1).Vector2D,o=e(33).Polynomial;function a(t){var n=t.slice();return n.push(t[0]),n}function u(t){this.init(t)}u.prototype.init=function(t){this.status=t,this.points=new Array},u.prototype.appendPoint=function(t){this.points.push(t)},u.prototype.appendPoints=function(t){this.points=this.points.concat(t)},u.intersect=function(t,n){var e;if(null!=t&&null!=n)if("Path"==t.name)e=u.intersectPathShape(t,n);else if("Path"==n.name)e=u.intersectPathShape(n,t);else{var r,i;if(t.name<n.name?(r="intersect"+t.name+n.name,i=t.args.concat(n.args)):(r="intersect"+n.name+t.name,i=n.args.concat(t.args)),!(r in u))throw new Error("Intersection not available: "+r);e=u[r].apply(null,i)}else e=new u("No Intersection");return e},u.intersectPathShape=function(t,n){for(var e=new u("No Intersection"),r=t.args.length,i=0;i<r;i++){var o=t.args[i],a=u.intersect(o,n);e.appendPoints(a.points)}return e.points.length>0&&(e.status="Intersection"),e},u.intersectBezier2Bezier2=function(t,n,e,i,a,s){var c,h,l,f,y,p,d=new u("No Intersection");x=n.multiply(-2),c=t.add(x.add(e)),x=t.multiply(-2),v=n.multiply(2),h=x.add(v),l=new r(t.x,t.y),x=a.multiply(-2),f=i.add(x.add(s)),x=i.multiply(-2),v=a.multiply(2),y=x.add(v),p=new r(i.x,i.y);for(var x=c.x*h.y-h.x*c.y,v=f.x*h.y-h.x*f.y,g=y.x*h.y-h.x*y.y,_=h.x*(l.y-p.y)+h.y*(-l.x+p.x),m=f.x*c.y-c.x*f.y,w=y.x*c.y-c.x*y.y,b=c.x*(l.y-p.y)+c.y*(-l.x+p.x),M=new o(-m*m,-2*m*w,x*v-w*w-2*m*b,x*g-2*w*b,x*_-b*b).getRoots(),z=0;z<M.length;z++){var N=M[z];if(0<=N&&N<=1){var k=new o(c.x,h.x,l.x-p.x-N*y.x-N*N*f.x);k.simplify();var S=k.getRoots(),A=new o(c.y,h.y,l.y-p.y-N*y.y-N*N*f.y);A.simplify();var T=A.getRoots();if(S.length>0&&T.length>0)t:for(var P=0;P<S.length;P++){var C=S[P];if(0<=C&&C<=1)for(var E=0;E<T.length;E++)if(Math.abs(C-T[E])<1e-4){d.points.push(f.multiply(N*N).add(y.multiply(N).add(p)));break t}}}}return d.points.length>0&&(d.status="Intersection"),d},u.intersectBezier2Bezier3=function(t,n,e,a,s,c,h){var l,f,y,p,d,x,v,g,_,m,w,b=new u("No Intersection");l=n.multiply(-2),d=t.add(l.add(e)),l=t.multiply(-2),f=n.multiply(2),x=l.add(f),v=new r(t.x,t.y),l=a.multiply(-1),f=s.multiply(3),y=c.multiply(-3),p=l.add(f.add(y.add(h))),g=new i(p.x,p.y),l=a.multiply(3),f=s.multiply(-6),y=c.multiply(3),p=l.add(f.add(y)),_=new i(p.x,p.y),l=a.multiply(-3),f=s.multiply(3),y=l.add(f),m=new i(y.x,y.y),w=new i(a.x,a.y);for(var M=v.x*v.x,z=v.y*v.y,N=x.x*x.x,k=x.y*x.y,S=d.x*d.x,A=d.y*d.y,T=w.x*w.x,P=w.y*w.y,C=m.x*m.x,E=m.y*m.y,I=_.x*_.x,q=_.y*_.y,R=g.x*g.x,D=g.y*g.y,L=new o(-2*d.x*d.y*g.x*g.y+S*D+A*R,-2*d.x*d.y*_.x*g.y-2*d.x*d.y*_.y*g.x+2*A*_.x*g.x+2*S*_.y*g.y,-2*d.x*m.x*d.y*g.y-2*d.x*d.y*m.y*g.x-2*d.x*d.y*_.x*_.y+2*m.x*A*g.x+A*I+S*(2*m.y*g.y+q),2*v.x*d.x*d.y*g.y+2*v.y*d.x*d.y*g.x+x.x*x.y*d.x*g.y+x.x*x.y*d.y*g.x-2*w.x*d.x*d.y*g.y-2*d.x*w.y*d.y*g.x-2*d.x*m.x*d.y*_.y-2*d.x*d.y*m.y*_.x-2*v.x*A*g.x-2*v.y*S*g.y+2*w.x*A*g.x+2*m.x*A*_.x-k*d.x*g.x-N*d.y*g.y+S*(2*w.y*g.y+2*m.y*_.y),2*v.x*d.x*d.y*_.y+2*v.y*d.x*d.y*_.x+x.x*x.y*d.x*_.y+x.x*x.y*d.y*_.x-2*w.x*d.x*d.y*_.y-2*d.x*w.y*d.y*_.x-2*d.x*m.x*d.y*m.y-2*v.x*A*_.x-2*v.y*S*_.y+2*w.x*A*_.x-k*d.x*_.x-N*d.y*_.y+C*A+S*(2*w.y*_.y+E),2*v.x*d.x*d.y*m.y+2*v.y*d.x*m.x*d.y+x.x*x.y*d.x*m.y+x.x*x.y*m.x*d.y-2*w.x*d.x*d.y*m.y-2*d.x*w.y*m.x*d.y-2*v.x*m.x*A-2*v.y*S*m.y+2*w.x*m.x*A-k*d.x*m.x-N*d.y*m.y+2*S*w.y*m.y,-2*v.x*v.y*d.x*d.y-v.x*x.x*x.y*d.y-v.y*x.x*x.y*d.x+2*v.x*d.x*w.y*d.y+2*v.y*w.x*d.x*d.y+x.x*w.x*x.y*d.y+x.x*x.y*d.x*w.y-2*w.x*d.x*w.y*d.y-2*v.x*w.x*A+v.x*k*d.x+v.y*N*d.y-2*v.y*S*w.y-w.x*k*d.x-N*w.y*d.y+M*A+z*S+T*A+S*P).getRootsInInterval(0,1),U=0;U<L.length;U++){var O=L[U],W=new o(d.x,x.x,v.x-w.x-O*m.x-O*O*_.x-O*O*O*g.x).getRoots(),j=new o(d.y,x.y,v.y-w.y-O*m.y-O*O*_.y-O*O*O*g.y).getRoots();if(W.length>0&&j.length>0)t:for(var F=0;F<W.length;F++){var B=W[F];if(0<=B&&B<=1)for(var X=0;X<j.length;X++)if(Math.abs(B-j[X])<1e-4){b.points.push(g.multiply(O*O*O).add(_.multiply(O*O).add(m.multiply(O).add(w))));break t}}}return b.points.length>0&&(b.status="Intersection"),b},u.intersectBezier2Circle=function(t,n,e,r,i){return u.intersectBezier2Ellipse(t,n,e,r,i,i)},u.intersectBezier2Ellipse=function(t,n,e,i,a,s){var c,h,l,f,y,p=new u("No Intersection");c=n.multiply(-2),l=t.add(c.add(e)),c=t.multiply(-2),h=n.multiply(2),f=c.add(h),y=new r(t.x,t.y);for(var d=a*a,x=s*s,v=new o(x*l.x*l.x+d*l.y*l.y,2*(x*l.x*f.x+d*l.y*f.y),x*(2*l.x*y.x+f.x*f.x)+d*(2*l.y*y.y+f.y*f.y)-2*(x*i.x*l.x+d*i.y*l.y),2*(x*f.x*(y.x-i.x)+d*f.y*(y.y-i.y)),x*(y.x*y.x+i.x*i.x)+d*(y.y*y.y+i.y*i.y)-2*(x*i.x*y.x+d*i.y*y.y)-d*x).getRoots(),g=0;g<v.length;g++){var _=v[g];0<=_&&_<=1&&p.points.push(l.multiply(_*_).add(f.multiply(_).add(y)))}return p.points.length>0&&(p.status="Intersection"),p},u.intersectBezier2Line=function(t,n,e,a,s){var c,h,l,f,y,p,d,x=a.min(s),v=a.max(s),g=new u("No Intersection");c=n.multiply(-2),l=t.add(c.add(e)),c=t.multiply(-2),h=n.multiply(2),f=c.add(h),y=new r(t.x,t.y),d=new i(a.y-s.y,s.x-a.x),p=a.x*s.y-s.x*a.y,roots=new o(d.dot(l),d.dot(f),d.dot(y)+p).getRoots();for(var _=0;_<roots.length;_++){var m=roots[_];if(0<=m&&m<=1){var w=t.lerp(n,m),b=n.lerp(e,m),M=w.lerp(b,m);a.x==s.x?x.y<=M.y&&M.y<=v.y&&(g.status="Intersection",g.appendPoint(M)):a.y==s.y?x.x<=M.x&&M.x<=v.x&&(g.status="Intersection",g.appendPoint(M)):x.x<=M.x&&M.x<=v.x&&x.y<=M.y&&M.y<=v.y&&(g.status="Intersection",g.appendPoint(M))}}return g},u.intersectBezier2Polygon=function(t,n,e,r){return u.intersectBezier2Polyline(t,n,e,a(r))},u.intersectBezier2Polyline=function(t,n,e,r){for(var i=new u("No Intersection"),o=r.length,a=0;a<o-1;a++){var s=r[a],c=r[a+1],h=u.intersectBezier2Line(t,n,e,s,c);i.appendPoints(h.points)}return i.points.length>0&&(i.status="Intersection"),i},u.intersectBezier2Rectangle=function(t,n,e,i,o){var a=i.min(o),s=i.max(o),c=new r(s.x,a.y),h=new r(a.x,s.y),l=u.intersectBezier2Line(t,n,e,a,c),f=u.intersectBezier2Line(t,n,e,c,s),y=u.intersectBezier2Line(t,n,e,s,h),p=u.intersectBezier2Line(t,n,e,h,a),d=new u("No Intersection");return d.appendPoints(l.points),d.appendPoints(f.points),d.appendPoints(y.points),d.appendPoints(p.points),d.points.length>0&&(d.status="Intersection"),d},u.intersectBezier3Bezier3=function(t,n,e,r,a,s,c,h){var l,f,y,p,d,x,v,g,_,m=new u("No Intersection");w=t.multiply(-1),b=n.multiply(3),l=e.multiply(-3),S=w.add(b.add(l.add(r))),f=new i(S.x,S.y),w=t.multiply(3),b=n.multiply(-6),l=e.multiply(3),S=w.add(b.add(l)),y=new i(S.x,S.y),w=t.multiply(-3),b=n.multiply(3),l=w.add(b),p=new i(l.x,l.y),d=new i(t.x,t.y),w=a.multiply(-1),b=s.multiply(3),l=c.multiply(-3),S=w.add(b.add(l.add(h))),x=new i(S.x,S.y),w=a.multiply(3),b=s.multiply(-6),l=c.multiply(3),S=w.add(b.add(l)),v=new i(S.x,S.y),w=a.multiply(-3),b=s.multiply(3),l=w.add(b),g=new i(l.x,l.y),_=new i(a.x,a.y);var w=f.x*y.y-y.x*f.y,b=f.x*p.y-p.x*f.y,M=f.x*d.y-d.x*f.y+_.x*f.y-f.x*_.y,z=g.x*f.y-f.x*g.y,N=v.x*f.y-f.x*v.y,k=x.x*f.y-f.x*x.y,S=f.x*p.y-p.x*f.y,A=f.x*d.y+y.x*p.y-p.x*y.y-d.x*f.y+_.x*f.y-f.x*_.y,T=g.x*f.y-f.x*g.y,P=v.x*f.y-f.x*v.y,C=x.x*f.y-f.x*x.y,E=y.x*d.y-d.x*y.y+_.x*y.y-y.x*_.y,I=g.x*y.y-y.x*g.y,q=v.x*y.y-y.x*v.y,R=x.x*y.y-y.x*x.y,D=f.x*d.y-d.x*f.y+_.x*f.y-f.x*_.y,L=g.x*f.y-f.x*g.y,U=v.x*f.y-f.x*v.y,O=x.x*f.y-f.x*x.y,W=y.x*d.y-d.x*y.y+_.x*y.y-y.x*_.y,j=g.x*y.y-y.x*g.y,F=v.x*y.y-y.x*v.y,B=x.x*y.y-y.x*x.y,X=p.x*d.y-d.x*p.y+_.x*p.y-p.x*_.y,Y=g.x*p.y-p.x*g.y,H=v.x*p.y-p.x*v.y,V=x.x*p.y-p.x*x.y,$=new o(-k*C*O,-k*C*U-k*P*O-N*C*O,-k*C*L-k*P*U-N*C*U-k*T*O-N*P*O-z*C*O,-k*C*D-k*P*L-N*C*L-k*T*U-N*P*U-z*C*U-k*A*O-N*T*O-z*P*O-M*C*O+b*R*O+k*S*B-w*R*B+w*C*V,-k*P*D-N*C*D-k*T*L-N*P*L-z*C*L-k*A*U-N*T*U-z*P*U-M*C*U+b*R*U-N*A*O-z*T*O-M*P*O+b*q*O+k*S*F-w*R*F+N*S*B-w*q*B+w*C*H+w*P*V,-k*T*D-N*P*D-z*C*D-k*A*L-N*T*L-z*P*L-M*C*L+b*R*L-N*A*U-z*T*U-M*P*U+b*q*U-z*A*O-M*T*O+b*I*O+k*S*j-w*R*j+N*S*F-w*q*F+z*S*B-w*I*B+w*C*Y+w*P*H+w*T*V,-k*A*D-N*T*D-z*P*D-M*C*D+b*R*D-N*A*L-z*T*L-M*P*L+b*q*L-z*A*U-M*T*U+b*I*U-M*A*O+b*E*O+k*S*W-w*R*W+N*S*j-w*q*j+z*S*F-w*I*F+M*S*B-w*E*B+w*C*X+w*P*Y+w*T*H-b*S*V+w*A*V,-N*A*D-z*T*D-M*P*D+b*q*D-z*A*L-M*T*L+b*I*L-M*A*U+b*E*U+N*S*W-w*q*W+z*S*j-w*I*j+M*S*F-w*E*F+w*P*X+w*T*Y-b*S*H+w*A*H,-z*A*D-M*T*D+b*I*D-M*A*L+b*E*L+z*S*W-w*I*W+M*S*j-w*E*j+w*T*X-b*S*Y+w*A*Y,-M*A*D+b*E*D+M*S*W-w*E*W-b*S*X+w*A*X);$.simplify();for(var Z=$.getRootsInInterval(0,1),Q=0;Q<Z.length;Q++){var G=Z[Q],J=new o(f.x,y.x,p.x,d.x-_.x-G*g.x-G*G*v.x-G*G*G*x.x);J.simplify(),xRoots=J.getRoots();var K=new o(f.y,y.y,p.y,d.y-_.y-G*g.y-G*G*v.y-G*G*G*x.y);if(K.simplify(),yRoots=K.getRoots(),xRoots.length>0&&yRoots.length>0)t:for(var tt=0;tt<xRoots.length;tt++){var nt=xRoots[tt];if(0<=nt&&nt<=1)for(var et=0;et<yRoots.length;et++)if(Math.abs(nt-yRoots[et])<1e-4){m.points.push(x.multiply(G*G*G).add(v.multiply(G*G).add(g.multiply(G).add(_))));break t}}}return m.points.length>0&&(m.status="Intersection"),m},u.intersectBezier3Circle=function(t,n,e,r,i,o){return u.intersectBezier3Ellipse(t,n,e,r,i,o,o)},u.intersectBezier3Ellipse=function(t,n,e,r,a,s,c){var h,l,f,y,p,d,x,v,g=new u("No Intersection");h=t.multiply(-1),l=n.multiply(3),f=e.multiply(-3),y=h.add(l.add(f.add(r))),p=new i(y.x,y.y),h=t.multiply(3),l=n.multiply(-6),f=e.multiply(3),y=h.add(l.add(f)),d=new i(y.x,y.y),h=t.multiply(-3),l=n.multiply(3),f=h.add(l),x=new i(f.x,f.y),v=new i(t.x,t.y);for(var _=s*s,m=c*c,w=new o(p.x*p.x*m+p.y*p.y*_,2*(p.x*d.x*m+p.y*d.y*_),2*(p.x*x.x*m+p.y*x.y*_)+d.x*d.x*m+d.y*d.y*_,2*p.x*m*(v.x-a.x)+2*p.y*_*(v.y-a.y)+2*(d.x*x.x*m+d.y*x.y*_),2*d.x*m*(v.x-a.x)+2*d.y*_*(v.y-a.y)+x.x*x.x*m+x.y*x.y*_,2*x.x*m*(v.x-a.x)+2*x.y*_*(v.y-a.y),v.x*v.x*m-2*v.y*a.y*_-2*v.x*a.x*m+v.y*v.y*_+a.x*a.x*m+a.y*a.y*_-_*m).getRootsInInterval(0,1),b=0;b<w.length;b++){var M=w[b];g.points.push(p.multiply(M*M*M).add(d.multiply(M*M).add(x.multiply(M).add(v))))}return g.points.length>0&&(g.status="Intersection"),g},u.intersectBezier3Line=function(t,n,e,r,a,s){var c,h,l,f,y,p,d,x,v,g,_=a.min(s),m=a.max(s),w=new u("No Intersection");c=t.multiply(-1),h=n.multiply(3),l=e.multiply(-3),f=c.add(h.add(l.add(r))),y=new i(f.x,f.y),c=t.multiply(3),h=n.multiply(-6),l=e.multiply(3),f=c.add(h.add(l)),p=new i(f.x,f.y),c=t.multiply(-3),h=n.multiply(3),l=c.add(h),d=new i(l.x,l.y),x=new i(t.x,t.y),g=new i(a.y-s.y,s.x-a.x),v=a.x*s.y-s.x*a.y,roots=new o(g.dot(y),g.dot(p),g.dot(d),g.dot(x)+v).getRoots();for(var b=0;b<roots.length;b++){var M=roots[b];if(0<=M&&M<=1){var z=t.lerp(n,M),N=n.lerp(e,M),k=e.lerp(r,M),S=z.lerp(N,M),A=N.lerp(k,M),T=S.lerp(A,M);a.x==s.x?_.y<=T.y&&T.y<=m.y&&(w.status="Intersection",w.appendPoint(T)):a.y==s.y?_.x<=T.x&&T.x<=m.x&&(w.status="Intersection",w.appendPoint(T)):_.x<=T.x&&T.x<=m.x&&_.y<=T.y&&T.y<=m.y&&(w.status="Intersection",w.appendPoint(T))}}return w},u.intersectBezier3Polygon=function(t,n,e,r,i){return this.intersectBezier3Polyline(t,n,e,r,a(i))},u.intersectBezier3Polyline=function(t,n,e,r,i){for(var o=new u("No Intersection"),a=i.length,s=0;s<a-1;s++){var c=i[s],h=i[s+1],l=u.intersectBezier3Line(t,n,e,r,c,h);o.appendPoints(l.points)}return o.points.length>0&&(o.status="Intersection"),o},u.intersectBezier3Rectangle=function(t,n,e,i,o,a){var s=o.min(a),c=o.max(a),h=new r(c.x,s.y),l=new r(s.x,c.y),f=u.intersectBezier3Line(t,n,e,i,s,h),y=u.intersectBezier3Line(t,n,e,i,h,c),p=u.intersectBezier3Line(t,n,e,i,c,l),d=u.intersectBezier3Line(t,n,e,i,l,s),x=new u("No Intersection");return x.appendPoints(f.points),x.appendPoints(y.points),x.appendPoints(p.points),x.appendPoints(d.points),x.points.length>0&&(x.status="Intersection"),x},u.intersectCircleCircle=function(t,n,e,i){var o,a=n+i,s=Math.abs(n-i),c=t.distanceFrom(e);if(c>a)o=new u("Outside");else if(c<s)o=new u("Inside");else{o=new u("Intersection");var h=(n*n-i*i+c*c)/(2*c),l=Math.sqrt(n*n-h*h),f=t.lerp(e,h/c),y=l/c;o.points.push(new r(f.x-y*(e.y-t.y),f.y+y*(e.x-t.x))),o.points.push(new r(f.x+y*(e.y-t.y),f.y-y*(e.x-t.x)))}return o},u.intersectCircleEllipse=function(t,n,e,r,i){return u.intersectEllipseEllipse(t,n,n,e,r,i)},u.intersectCircleLine=function(t,n,e,r){var i,o=(r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y),a=2*((r.x-e.x)*(e.x-t.x)+(r.y-e.y)*(e.y-t.y)),s=a*a-4*o*(t.x*t.x+t.y*t.y+e.x*e.x+e.y*e.y-2*(t.x*e.x+t.y*e.y)-n*n);if(s<0)i=new u("Outside");else if(0==s)i=new u("Tangent");else{var c=Math.sqrt(s),h=(-a+c)/(2*o),l=(-a-c)/(2*o);(h<0||h>1)&&(l<0||l>1)?i=new u(h<0&&l<0||h>1&&l>1?"Outside":"Inside"):(i=new u("Intersection"),0<=h&&h<=1&&i.points.push(e.lerp(r,h)),0<=l&&l<=1&&i.points.push(e.lerp(r,l)))}return i},u.intersectCirclePolygon=function(t,n,e){return this.intersectCirclePolyline(t,n,a(e))},u.intersectCirclePolyline=function(t,n,e){for(var r,i=new u("No Intersection"),o=e.length,a=0;a<o-1;a++){var s=e[a],c=e[a+1];r=u.intersectCircleLine(t,n,s,c),i.appendPoints(r.points)}return i.points.length>0?i.status="Intersection":i.status=r.status,i},u.intersectCircleRectangle=function(t,n,e,i){var o=e.min(i),a=e.max(i),s=new r(a.x,o.y),c=new r(o.x,a.y),h=u.intersectCircleLine(t,n,o,s),l=u.intersectCircleLine(t,n,s,a),f=u.intersectCircleLine(t,n,a,c),y=u.intersectCircleLine(t,n,c,o),p=new u("No Intersection");return p.appendPoints(h.points),p.appendPoints(l.points),p.appendPoints(f.points),p.appendPoints(y.points),p.points.length>0?p.status="Intersection":p.status=h.status,p},u.intersectEllipseEllipse=function(t,n,e,i,a,s){for(var c=[e*e,0,n*n,-2*e*e*t.x,-2*n*n*t.y,e*e*t.x*t.x+n*n*t.y*t.y-n*n*e*e],h=[s*s,0,a*a,-2*s*s*i.x,-2*a*a*i.y,s*s*i.x*i.x+a*a*i.y*i.y-a*a*s*s],l=u.bezout(c,h).getRoots(),f=.001*(c[0]*c[0]+2*c[1]*c[1]+c[2]*c[2]),y=.001*(h[0]*h[0]+2*h[1]*h[1]+h[2]*h[2]),p=new u("No Intersection"),d=0;d<l.length;d++)for(var x=new o(c[0],c[3]+l[d]*c[1],c[5]+l[d]*(c[4]+l[d]*c[2])).getRoots(),v=0;v<x.length;v++){var g=(c[0]*x[v]+c[1]*l[d]+c[3])*x[v]+(c[2]*l[d]+c[4])*l[d]+c[5];Math.abs(g)<f&&(g=(h[0]*x[v]+h[1]*l[d]+h[3])*x[v]+(h[2]*l[d]+h[4])*l[d]+h[5],Math.abs(g)<y&&p.appendPoint(new r(x[v],l[d])))}return p.points.length>0&&(p.status="Intersection"),p},u.intersectEllipseLine=function(t,n,e,r,o){var a,s=new i(r.x,r.y),c=i.fromPoints(r,o),h=new i(t.x,t.y),l=s.subtract(h),f=new i(c.x/(n*n),c.y/(e*e)),y=new i(l.x/(n*n),l.y/(e*e)),p=c.dot(f),d=c.dot(y),x=d*d-p*(t=l.dot(y)-1);if(x<0)a=new u("Outside");else if(x>0){var v=Math.sqrt(x),g=(-d-v)/p,_=(-d+v)/p;(g<0||1<g)&&(_<0||1<_)?a=new u(g<0&&_<0||g>1&&_>1?"Outside":"Inside"):(a=new u("Intersection"),0<=g&&g<=1&&a.appendPoint(r.lerp(o,g)),0<=_&&_<=1&&a.appendPoint(r.lerp(o,_)))}else{var m=-d/p;0<=m&&m<=1?(a=new u("Intersection")).appendPoint(r.lerp(o,m)):a=new u("Outside")}return a},u.intersectEllipsePolygon=function(t,n,e,r){return this.intersectEllipsePolyline(t,n,e,a(r))},u.intersectEllipsePolyline=function(t,n,e,r){for(var i=new u("No Intersection"),o=r.length,a=0;a<o-1;a++){var s=r[a],c=r[a+1],h=u.intersectEllipseLine(t,n,e,s,c);i.appendPoints(h.points)}return i.points.length>0&&(i.status="Intersection"),i},u.intersectEllipseRectangle=function(t,n,e,i,o){var a=i.min(o),s=i.max(o),c=new r(s.x,a.y),h=new r(a.x,s.y),l=u.intersectEllipseLine(t,n,e,a,c),f=u.intersectEllipseLine(t,n,e,c,s),y=u.intersectEllipseLine(t,n,e,s,h),p=u.intersectEllipseLine(t,n,e,h,a),d=new u("No Intersection");return d.appendPoints(l.points),d.appendPoints(f.points),d.appendPoints(y.points),d.appendPoints(p.points),d.points.length>0&&(d.status="Intersection"),d},u.intersectLineLine=function(t,n,e,i){var o,a=(i.x-e.x)*(t.y-e.y)-(i.y-e.y)*(t.x-e.x),s=(n.x-t.x)*(t.y-e.y)-(n.y-t.y)*(t.x-e.x),c=(i.y-e.y)*(n.x-t.x)-(i.x-e.x)*(n.y-t.y);if(0!=c){var h=a/c,l=s/c;0<=h&&h<=1&&0<=l&&l<=1?(o=new u("Intersection")).points.push(new r(t.x+h*(n.x-t.x),t.y+h*(n.y-t.y))):o=new u("No Intersection")}else o=new u(0==a||0==s?"Coincident":"Parallel");return o},u.intersectLinePolygon=function(t,n,e){return this.intersectLinePolyline(t,n,a(e))},u.intersectLinePolyline=function(t,n,e){for(var r=new u("No Intersection"),i=e.length,o=0;o<i-1;o++){var a=e[o],s=e[o+1],c=u.intersectLineLine(t,n,a,s);r.appendPoints(c.points)}return r.points.length>0&&(r.status="Intersection"),r},u.intersectLineRectangle=function(t,n,e,i){var o=e.min(i),a=e.max(i),s=new r(a.x,o.y),c=new r(o.x,a.y),h=u.intersectLineLine(o,s,t,n),l=u.intersectLineLine(s,a,t,n),f=u.intersectLineLine(a,c,t,n),y=u.intersectLineLine(c,o,t,n),p=new u("No Intersection");return p.appendPoints(h.points),p.appendPoints(l.points),p.appendPoints(f.points),p.appendPoints(y.points),p.points.length>0&&(p.status="Intersection"),p},u.intersectPolygonPolygon=function(t,n){return this.intersectPolylinePolyline(a(t),a(n))},u.intersectPolygonPolyline=function(t,n){return this.intersectPolylinePolyline(a(t),n)},u.intersectPolygonRectangle=function(t,n,e){return this.intersectPolylineRectangle(a(t),n,e)},u.intersectPolylinePolyline=function(t,n){for(var e=new u("No Intersection"),r=t.length,i=0;i<r-1;i++){var o=t[i],a=t[i+1],s=u.intersectLinePolyline(o,a,n);e.appendPoints(s.points)}return e.points.length>0&&(e.status="Intersection"),e},u.intersectPolylineRectangle=function(t,n,e){var i=n.min(e),o=n.max(e),a=new r(o.x,i.y),s=new r(i.x,o.y),c=u.intersectLinePolyline(i,a,t),h=u.intersectLinePolyline(a,o,t),l=u.intersectLinePolyline(o,s,t),f=u.intersectLinePolyline(s,i,t),y=new u("No Intersection");return y.appendPoints(c.points),y.appendPoints(h.points),y.appendPoints(l.points),y.appendPoints(f.points),y.points.length>0&&(y.status="Intersection"),y},u.intersectRectangleRectangle=function(t,n,e,i){var o=t.min(n),a=t.max(n),s=new r(a.x,o.y),c=new r(o.x,a.y),h=u.intersectLineRectangle(o,s,e,i),l=u.intersectLineRectangle(s,a,e,i),f=u.intersectLineRectangle(a,c,e,i),y=u.intersectLineRectangle(c,o,e,i),p=new u("No Intersection");return p.appendPoints(h.points),p.appendPoints(l.points),p.appendPoints(f.points),p.appendPoints(y.points),p.points.length>0&&(p.status="Intersection"),p},u.intersectRayRay=function(t,n,e,i){var o,a=(i.x-e.x)*(t.y-e.y)-(i.y-e.y)*(t.x-e.x),s=(n.x-t.x)*(t.y-e.y)-(n.y-t.y)*(t.x-e.x),c=(i.y-e.y)*(n.x-t.x)-(i.x-e.x)*(n.y-t.y);if(0!=c){var h=a/c;(o=new u("Intersection")).points.push(new r(t.x+h*(n.x-t.x),t.y+h*(n.y-t.y)))}else o=new u(0==a||0==s?"Coincident":"Parallel");return o},u.bezout=function(t,n){var e=t[0]*n[1]-n[0]*t[1],r=t[0]*n[2]-n[0]*t[2],i=t[0]*n[3]-n[0]*t[3],a=t[0]*n[4]-n[0]*t[4],u=t[0]*n[5]-n[0]*t[5],s=t[1]*n[2]-n[1]*t[2],c=t[1]*n[4]-n[1]*t[4],h=t[1]*n[5]-n[1]*t[5],l=t[2]*n[3]-n[2]*t[3],f=t[3]*n[4]-n[3]*t[4],y=t[3]*n[5]-n[3]*t[5],p=h+f,d=c-l;return new o(e*s-r*r,e*d+i*s-2*r*a,e*p+i*d-a*a-2*r*u,e*y+i*p-2*a*u,i*y-u*u)},t.exports=u},function(t,n,e){function r(t,n){Object.defineProperties(this,{x:{value:void 0!==t?t:0,writable:!1,enumerable:!0,configurable:!1},y:{value:void 0!==n?n:0,writable:!1,enumerable:!0,configurable:!1}})}r.prototype.clone=function(){return new this.constructor(this.x,this.y)},r.prototype.add=function(t){return new this.constructor(this.x+t.x,this.y+t.y)},r.prototype.subtract=function(t){return new this.constructor(this.x-t.x,this.y-t.y)},r.prototype.multiply=function(t){return new this.constructor(this.x*t,this.y*t)},r.prototype.divide=function(t){return new this.constructor(this.x/t,this.y/t)},r.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},r.prototype.precisionEquals=function(t,n){return Math.abs(this.x-t.x)<n&&Math.abs(this.y-t.y)<n},r.prototype.lerp=function(t,n){var e=1-n;return new this.constructor(this.x*e+t.x*n,this.y*e+t.y*n)},r.prototype.distanceFrom=function(t){var n=this.x-t.x,e=this.y-t.y;return Math.sqrt(n*n+e*e)},r.prototype.min=function(t){return new this.constructor(Math.min(this.x,t.x),Math.min(this.y,t.y))},r.prototype.max=function(t){return new this.constructor(Math.max(this.x,t.x),Math.max(this.y,t.y))},r.prototype.transform=function(t){return new this.constructor(t.a*this.x+t.c*this.y+t.e,t.b*this.x+t.d*this.y+t.f)},r.prototype.toString=function(){return"point("+this.x+","+this.y+")"},t.exports=r},function(t,n,e){function r(t,n){Object.defineProperties(this,{x:{value:void 0!==t?t:0,writable:!1,enumerable:!0,configurable:!1},y:{value:void 0!==n?n:0,writable:!1,enumerable:!0,configurable:!1}})}r.fromPoints=function(t,n){return new r(n.x-t.x,n.y-t.y)},r.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},r.prototype.magnitude=function(){return this.x*this.x+this.y*this.y},r.prototype.dot=function(t){return this.x*t.x+this.y*t.y},r.prototype.cross=function(t){return this.x*t.y-this.y*t.x},r.prototype.determinant=function(t){return this.x*t.y-this.y*t.x},r.prototype.unit=function(){return this.divide(this.length())},r.prototype.add=function(t){return new this.constructor(this.x+t.x,this.y+t.y)},r.prototype.subtract=function(t){return new this.constructor(this.x-t.x,this.y-t.y)},r.prototype.multiply=function(t){return new this.constructor(this.x*t,this.y*t)},r.prototype.divide=function(t){return new this.constructor(this.x/t,this.y/t)},r.prototype.angleBetween=function(t){var n=this.dot(t)/(this.length()*t.length());n=Math.max(-1,Math.min(n,1));var e=Math.acos(n);return this.cross(t)<0?-e:e},r.prototype.perp=function(){return new this.constructor(-this.y,this.x)},r.prototype.perpendicular=function(t){return this.subtract(this.project(t))},r.prototype.project=function(t){var n=this.dot(t)/t.dot(t);return t.multiply(n)},r.prototype.transform=function(t){return new this.constructor(t.a*this.x+t.c*this.y,t.b*this.x+t.d*this.y)},r.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},r.prototype.precisionEquals=function(t,n){return Math.abs(this.x-t.x)<n&&Math.abs(this.y-t.y)<n},r.prototype.toString=function(){return"vector("+this.x+","+this.y+")"},t.exports=r},function(t,n,e){function r(t,n,e){Object.defineProperty(t,n,{value:e,writable:!1,enumerable:!0,configurable:!1})}function i(t,n,e,i,o,a){r(this,"a",void 0!==t?t:1),r(this,"b",void 0!==n?n:0),r(this,"c",void 0!==e?e:0),r(this,"d",void 0!==i?i:1),r(this,"e",void 0!==o?o:0),r(this,"f",void 0!==a?a:0)}r(i,"IDENTITY",new i(1,0,0,1,0,0)),r(i.IDENTITY,"isIdentity",function(){return!0}),i.translation=function(t,n){return new i(1,0,0,1,t,n)},i.scaling=function(t){return new i(t,0,0,t,0,0)},i.scalingAt=function(t,n){return new i(t,0,0,t,n.x-n.x*t,n.y-n.y*t)},i.nonUniformScaling=function(t,n){return new i(t,0,0,n,0,0)},i.nonUniformScalingAt=function(t,n,e){return new i(t,0,0,n,e.x-e.x*t,e.y-e.y*n)},i.rotation=function(t){let n=Math.cos(t),e=Math.sin(t);return new i(n,e,-e,n,0,0)},i.rotationAt=function(t,n){let e=Math.cos(t),r=Math.sin(t);return new i(e,r,-r,e,n.x-n.x*e+n.y*r,n.y-n.y*e-n.x*r)},i.rotationFromVector=function(t){var n=t.unit(),e=n.x,r=n.y;return new i(e,r,-r,e,0,0)},i.xFlip=function(){return new i(-1,0,0,1,0,0)},i.yFlip=function(){return new i(1,0,0,-1,0,0)},i.xSkew=function(t){return new i(1,0,Math.tan(t),1,0,0)},i.ySkew=function(t){return new i(1,Math.tan(t),0,1,0,0)},i.prototype.multiply=function(t){return this.isIdentity()?t:t.isIdentity()?this:new this.constructor(this.a*t.a+this.c*t.b,this.b*t.a+this.d*t.b,this.a*t.c+this.c*t.d,this.b*t.c+this.d*t.d,this.a*t.e+this.c*t.f+this.e,this.b*t.e+this.d*t.f+this.f)},i.prototype.inverse=function(){if(this.isIdentity())return this;var t=this.a*this.d-this.b*this.c;if(0===t)throw"Matrix is not invertible";var n=1/t,e=this.f*this.c-this.e*this.d,r=this.e*this.b-this.f*this.a;return new this.constructor(this.d*n,-this.b*n,-this.c*n,this.a*n,e*n,r*n)},i.prototype.translate=function(t,n){return new this.constructor(this.a,this.b,this.c,this.d,this.a*t+this.c*n+this.e,this.b*t+this.d*n+this.f)},i.prototype.scale=function(t){return new this.constructor(this.a*t,this.b*t,this.c*t,this.d*t,this.e,this.f)},i.prototype.scaleAt=function(t,n){var e=n.x-t*n.x,r=n.y-t*n.y;return new this.constructor(this.a*t,this.b*t,this.c*t,this.d*t,this.a*e+this.c*r+this.e,this.b*e+this.d*r+this.f)},i.prototype.scaleNonUniform=function(t,n){return new this.constructor(this.a*t,this.b*t,this.c*n,this.d*n,this.e,this.f)},i.prototype.scaleNonUniformAt=function(t,n,e){var r=e.x-t*e.x,i=e.y-n*e.y;return new this.constructor(this.a*t,this.b*t,this.c*n,this.d*n,this.a*r+this.c*i+this.e,this.b*r+this.d*i+this.f)},i.prototype.rotate=function(t){var n=Math.cos(t),e=Math.sin(t);return new this.constructor(this.a*n+this.c*e,this.b*n+this.d*e,this.a*-e+this.c*n,this.b*-e+this.d*n,this.e,this.f)},i.prototype.rotateAt=function(t,n){var e=Math.cos(t),r=Math.sin(t),i=n.x,o=n.y,a=this.a*e+this.c*r,u=this.b*e+this.d*r,s=this.c*e-this.a*r,c=this.d*e-this.b*r;return new this.constructor(a,u,s,c,(this.a-a)*i+(this.c-s)*o+this.e,(this.b-u)*i+(this.d-c)*o+this.f)},i.prototype.rotateFromVector=function(t){var n=t.unit(),e=n.x,r=n.y;return new this.constructor(this.a*e+this.c*r,this.b*e+this.d*r,this.a*-r+this.c*e,this.b*-r+this.d*e,this.e,this.f)},i.prototype.flipX=function(){return new this.constructor(-this.a,-this.b,this.c,this.d,this.e,this.f)},i.prototype.flipY=function(){return new this.constructor(this.a,this.b,-this.c,-this.d,this.e,this.f)},i.prototype.skewX=function(t){var n=Math.tan(t);return new this.constructor(this.a,this.b,this.c+this.a*n,this.d+this.b*n,this.e,this.f)},i.prototype.skewY=function(t){var n=Math.tan(t);return new this.constructor(this.a+this.c*n,this.b+this.d*n,this.c,this.d,this.e,this.f)},i.prototype.isIdentity=function(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.e&&0===this.f},i.prototype.isInvertible=function(){return this.a*this.d-this.b*this.c!=0},i.prototype.getScale=function(){return{scaleX:Math.sqrt(this.a*this.a+this.c*this.c),scaleY:Math.sqrt(this.b*this.b+this.d*this.d)}},i.prototype.getDecomposition=function(){var t=.5*(this.a+this.d),n=.5*(this.a-this.d),e=.5*(this.b+this.c),r=.5*(this.b-this.c),i=Math.sqrt(t*t+r*r),o=Math.sqrt(n*n+e*e),a=i+o,u=i-o,s=Math.atan2(e,n),c=Math.atan2(r,t),h=.5*(c-s),l=.5*(c+s);return{translation:new this.constructor(1,0,0,1,this.e,this.f),rotation:this.constructor.IDENTITY.rotate(l),scale:new this.constructor(a,0,0,u,0,0),rotation0:this.constructor.IDENTITY.rotate(h)}},i.prototype.equals=function(t){return this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f},i.prototype.precisionEquals=function(t,n){return Math.abs(this.a-t.a)<n&&Math.abs(this.b-t.b)<n&&Math.abs(this.c-t.c)<n&&Math.abs(this.d-t.d)<n&&Math.abs(this.e-t.e)<n&&Math.abs(this.f-t.f)<n},i.prototype.toString=function(){return"matrix("+[this.a,this.b,this.c,this.d,this.e,this.f].join(",")+")"},t.exports=i},function(t,n,e){n.Polynomial=e(7),n.SqrtPolynomial=e(34)},function(t,n,e){var r=e(7);function i(){this.init(arguments)}i.VERSION=1,i.prototype=new r,i.prototype.constructor=i,i.superclass=r.prototype,i.prototype.eval=function(t){var n=i.superclass.eval.call(this,t);if(Math.abs(n)<1e-7&&(n=0),n<0)throw new Error("SqrtPolynomial.eval: cannot take square root of negative number");return Math.sqrt(n)},i.prototype.toString=function(){return"sqrt("+i.superclass.toString.call(this)+")"},t.exports=i},function(t,n,e){var r=e(1).Point2D,i=e(5),o={quadraticBezier:function(t,n,e,o,a,u){return new i("Bezier2",[new r(t,n),new r(e,o),new r(a,u)])},cubicBezier:function(t,n,e,o,a,u,s,c){return new i("Bezier3",[new r(t,n),new r(e,o),new r(a,u),new r(s,c)])},circle:function(t,n,e){return new i("Circle",[new r(t,n),e])},ellipse:function(t,n,e,o){return new i("Ellipse",[new r(t,n),e,o])},line:function(t,n,e,o){return new i("Line",[new r(t,n),new r(e,o)])},path:function(t){return new i("Path",t)},polygon:function(t){for(var n=[],e=0;e<t.length;e+=2)n.push(new r(t[e],t[e+1]));return new i("Polygon",[n])},polyline:function(t){for(var n=[],e=0;e<t.length;e+=2)n.push(new r(t[e],t[e+1]));return new i("Polyline",[n])},rectangle:function(t,n,e,o){return new i("Rectangle",[new r(t,n),new r(t+e,n+o)])}};t.exports=o},function(t,n,e){e(1).Point2D;var r=e(5),i={quadraticBezier:function(t,n,e){return new r("Bezier2",[t,n,e])},cubicBezier:function(t,n,e,i){return new r("Bezier3",[t,n,e,i])},circle:function(t,n){return new r("Circle",[t,n])},ellipse:function(t,n,e){return new r("Ellipse",[t,n,e])},line:function(t,n){return new r("Line",[t,n])},path:function(t){return new r("Path",[t])},polygon:function(t){return new r("Polygon",[t])},polyline:function(t){return new r("Polyline",[t])},rectangle:function(t,n){return new r("Rectangle",[t,t.add(n)])}};t.exports=i},function(t,n,e){var r=e(1).Vector2D,i={pointInCircle:function(t,n,e){return r.fromPoints(n,t).length()<=e},pointInEllipse:function(t,n,e,r){var i=t.subtract(n);return i.x*i.x/(e*e)+i.y*i.y/(r*r)<=1},pointInPolyline:function(t,n){for(var e,r=n.length,i=0,o=n[0],a=1;a<=r;a++){var u=n[a%r],s=Math.min(o.y,u.y),c=Math.max(o.y,u.y),h=Math.max(o.x,u.x);o.y!=u.y&&s<t.y&&t.y<=c&&t.x<=h&&(e=(t.y-o.y)*(u.x-o.x)/(u.y-o.y)+o.x,(o.x==u.x||t.x<=e)&&i++),o=u}return i%2==1}};i.pointInPolygon=i.pointInPolyline,i.pointInRectangle=function(t,n,e){return n.x<=t.x&&t.x<e.x&&n.y<=t.y&&t.y<e.y},t.exports=i},function(t,n,e){"use strict";e.r(n);var r=function(t,n,e){t.prototype=n.prototype=e,e.constructor=t};function i(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function o(){}var a="\\s*([+-]?\\d+)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c=/^#([0-9a-f]{3})$/,h=/^#([0-9a-f]{6})$/,l=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),f=new RegExp("^rgb\\("+[s,s,s]+"\\)$"),y=new RegExp("^rgba\\("+[a,a,a,u]+"\\)$"),p=new RegExp("^rgba\\("+[s,s,s,u]+"\\)$"),d=new RegExp("^hsl\\("+[u,s,s]+"\\)$"),x=new RegExp("^hsla\\("+[u,s,s,u]+"\\)$"),v={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function g(t){var n;return t=(t+"").trim().toLowerCase(),(n=c.exec(t))?new M((n=parseInt(n[1],16))>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):(n=h.exec(t))?_(parseInt(n[1],16)):(n=l.exec(t))?new M(n[1],n[2],n[3],1):(n=f.exec(t))?new M(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=y.exec(t))?m(n[1],n[2],n[3],n[4]):(n=p.exec(t))?m(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=d.exec(t))?N(n[1],n[2]/100,n[3]/100,1):(n=x.exec(t))?N(n[1],n[2]/100,n[3]/100,n[4]):v.hasOwnProperty(t)?_(v[t]):"transparent"===t?new M(NaN,NaN,NaN,0):null}function _(t){return new M(t>>16&255,t>>8&255,255&t,1)}function m(t,n,e,r){return r<=0&&(t=n=e=NaN),new M(t,n,e,r)}function w(t){return t instanceof o||(t=g(t)),t?new M((t=t.rgb()).r,t.g,t.b,t.opacity):new M}function b(t,n,e,r){return 1===arguments.length?w(t):new M(t,n,e,null==r?1:r)}function M(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function z(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function N(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new S(t,n,e,r)}function k(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof S)return new S(t.h,t.s,t.l,t.opacity);if(t instanceof o||(t=g(t)),!t)return new S;if(t instanceof S)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),a=Math.max(n,e,r),u=NaN,s=a-i,c=(a+i)/2;return s?(u=n===a?(e-r)/s+6*(e<r):e===a?(r-n)/s+2:(n-e)/s+4,s/=c<.5?a+i:2-a-i,u*=60):s=c>0&&c<1?0:u,new S(u,s,c,t.opacity)}(t):new S(t,n,e,null==r?1:r)}function S(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function A(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}r(o,g,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),r(M,b,i(o,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new M(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new M(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+z(this.r)+z(this.g)+z(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),r(S,k,i(o,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new S(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new S(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new M(A(t>=240?t-240:t+120,i,r),A(t,i,r),A(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var T=Math.PI/180,P=180/Math.PI,C=.96422,E=1,I=.82521,q=4/29,R=6/29,D=3*R*R,L=R*R*R;function U(t){if(t instanceof O)return new O(t.l,t.a,t.b,t.opacity);if(t instanceof Y){if(isNaN(t.h))return new O(t.l,0,0,t.opacity);var n=t.h*T;return new O(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}t instanceof M||(t=w(t));var e,r,i=B(t.r),o=B(t.g),a=B(t.b),u=W((.2225045*i+.7168786*o+.0606169*a)/E);return i===o&&o===a?e=r=u:(e=W((.4360747*i+.3850649*o+.1430804*a)/C),r=W((.0139322*i+.0971045*o+.7141733*a)/I)),new O(116*u-16,500*(e-u),200*(u-r),t.opacity)}function O(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function W(t){return t>L?Math.pow(t,1/3):t/D+q}function j(t){return t>R?t*t*t:D*(t-q)}function F(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function B(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function X(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof Y)return new Y(t.h,t.c,t.l,t.opacity);if(t instanceof O||(t=U(t)),0===t.a&&0===t.b)return new Y(NaN,0,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*P;return new Y(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new Y(t,n,e,null==r?1:r)}function Y(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}r(O,function(t,n,e,r){return 1===arguments.length?U(t):new O(t,n,e,null==r?1:r)},i(o,{brighter:function(t){return new O(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new O(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return new M(F(3.1338561*(n=C*j(n))-1.6168667*(t=E*j(t))-.4906146*(e=I*j(e))),F(-.9787684*n+1.9161415*t+.033454*e),F(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),r(Y,X,i(o,{brighter:function(t){return new Y(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Y(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return U(this).rgb()}}));var H=-.14861,V=1.78277,$=-.29227,Z=-.90649,Q=1.97294,G=Q*Z,J=Q*V,K=V*$-Z*H;function tt(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof nt)return new nt(t.h,t.s,t.l,t.opacity);t instanceof M||(t=w(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(K*r+G*n-J*e)/(K+G-J),o=r-i,a=(Q*(e-i)-$*o)/Z,u=Math.sqrt(a*a+o*o)/(Q*i*(1-i)),s=u?Math.atan2(a,o)*P-120:NaN;return new nt(s<0?s+360:s,u,i,t.opacity)}(t):new nt(t,n,e,null==r?1:r)}function nt(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}r(nt,tt,i(o,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new nt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new nt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*T,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new M(255*(n+e*(H*r+V*i)),255*(n+e*($*r+Z*i)),255*(n+e*(Q*r)),this.opacity)}}));var et=function(t,n){return t<n?-1:t>n?1:t>=n?0:NaN},rt=function(t){var n;return 1===t.length&&(n=t,t=function(t,e){return et(n(t),e)}),{left:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)<0?r=o+1:i=o}return r},right:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)>0?i=o:r=o+1}return r}}}(et),it=rt.right,ot=(rt.left,it),at=function(t,n){let e,r;if(void 0===n)for(let n of t)null!=n&&n>=n&&(void 0===e?e=r=n:(e>n&&(e=n),r<n&&(r=n)));else{let i=-1;for(let o of t)null!=(o=n(o,++i,t))&&o>=o&&(void 0===e?e=r=o:(e>o&&(e=o),r<o&&(r=o)))}return[e,r]},ut=Array.prototype,st=(ut.slice,ut.map,function(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o}),ct=Math.sqrt(50),ht=Math.sqrt(10),lt=Math.sqrt(2),ft=function(t,n,e){var r,i,o,a,u=-1;if(e=+e,(t=+t)==(n=+n)&&e>0)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(a=yt(t,n,e))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),n=Math.floor(n/a),o=new Array(i=Math.ceil(n-t+1));++u<i;)o[u]=(t+u)*a;else for(t=Math.floor(t*a),n=Math.ceil(n*a),o=new Array(i=Math.ceil(t-n+1));++u<i;)o[u]=(t-u)/a;return r&&o.reverse(),o};function yt(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=ct?10:o>=ht?5:o>=lt?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=ct?10:o>=ht?5:o>=lt?2:1)}function pt(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}function dt(t,n,e,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*n+(4-6*o+3*a)*e+(1+3*t+3*o-3*a)*r+a*i)/6}Symbol("implicit");var xt=function(t){return function(){return t}};function vt(t,n){return function(e){return t+e*n}}function gt(t,n){var e=n-t;return e?vt(t,e>180||e<-180?e-360*Math.round(e/360):e):xt(isNaN(t)?n:t)}function _t(t,n){var e=n-t;return e?vt(t,e):xt(isNaN(t)?n:t)}var mt=function t(n){var e=function(t){return 1==(t=+t)?_t:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):xt(isNaN(n)?e:n)}}(n);function r(t,n){var r=e((t=b(t)).r,(n=b(n)).r),i=e(t.g,n.g),o=e(t.b,n.b),a=_t(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=o(n),t.opacity=a(n),t+""}}return r.gamma=t,r}(1);function wt(t){return function(n){var e,r,i=n.length,o=new Array(i),a=new Array(i),u=new Array(i);for(e=0;e<i;++e)r=b(n[e]),o[e]=r.r||0,a[e]=r.g||0,u[e]=r.b||0;return o=t(o),a=t(a),u=t(u),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=u(t),r+""}}}wt(function(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,u=r<n-1?t[r+2]:2*o-i;return dt((e-r/n)*n,a,i,o,u)}}),wt(function(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),i=t[(r+n-1)%n],o=t[r%n],a=t[(r+1)%n],u=t[(r+2)%n];return dt((e-r/n)*n,i,o,a,u)}});var bt,Mt,zt,Nt,kt=function(t,n){return n-=t=+t,function(e){return t+n*e}},St=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,At=new RegExp(St.source,"g"),Tt=function(t,n){var e,r,i,o=St.lastIndex=At.lastIndex=0,a=-1,u=[],s=[];for(t+="",n+="";(e=St.exec(t))&&(r=At.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(e=e[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,s.push({i:a,x:kt(e,r)})),o=At.lastIndex;return o<n.length&&(i=n.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?s[0]?function(t){return function(n){return t(n)+""}}(s[0].x):function(t){return function(){return t}}(n):(n=s.length,function(t){for(var e,r=0;r<n;++r)u[(e=s[r]).i]=e.x(t);return u.join("")})},Pt=function(t,n){var e,r=typeof n;return null==n||"boolean"===r?xt(n):("number"===r?kt:"string"===r?(e=g(n))?(n=e,mt):Tt:n instanceof g?mt:n instanceof Date?function(t,n){var e=new Date;return n-=t=+t,function(r){return e.setTime(t+n*r),e}}:Array.isArray(n)?function(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(e=0;e<i;++e)o[e]=Pt(t[e],n[e]);for(;e<r;++e)a[e]=n[e];return function(t){for(e=0;e<i;++e)a[e]=o[e](t);return a}}:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?function(t,n){var e,r={},i={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?r[e]=Pt(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}:kt)(t,n)},Ct=function(t,n){return n-=t=+t,function(e){return Math.round(t+n*e)}},Et=180/Math.PI,It={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},qt=function(t,n,e,r,i,o){var a,u,s;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(s=t*e+n*r)&&(e-=t*s,r-=n*s),(u=Math.sqrt(e*e+r*r))&&(e/=u,r/=u,s/=u),t*r<n*e&&(t=-t,n=-n,s=-s,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*Et,skewX:Math.atan(s)*Et,scaleX:a,scaleY:u}};function Rt(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var u=[],s=[];return o=t(o),a=t(a),function(t,r,i,o,a,u){if(t!==i||r!==o){var s=a.push("translate(",null,n,null,e);u.push({i:s-4,x:kt(t,i)},{i:s-2,x:kt(r,o)})}else(i||o)&&a.push("translate("+i+n+o+e)}(o.translateX,o.translateY,a.translateX,a.translateY,u,s),function(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),s.push({i:e.push(i(e)+"rotate(",null,r)-2,x:kt(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}(o.rotate,a.rotate,u),function(t,n,e,o){t!==n?s.push({i:e.push(i(e)+"skewX(",null,r)-2,x:kt(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}(o.skewX,a.skewX,u),function(t,n,e,r,o,a){if(t!==e||n!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:kt(t,e)},{i:u-2,x:kt(n,r)})}else 1===e&&1===r||o.push(i(o)+"scale("+e+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,u,s),o=a=null,function(t){for(var n,e=-1,r=s.length;++e<r;)u[(n=s[e]).i]=n.x(t);return u.join("")}}}var Dt=Rt(function(t){return"none"===t?It:(bt||(bt=document.createElement("DIV"),Mt=document.documentElement,zt=document.defaultView),bt.style.transform=t,t=zt.getComputedStyle(Mt.appendChild(bt),null).getPropertyValue("transform"),Mt.removeChild(bt),t=t.slice(7,-1).split(","),qt(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),Lt=Rt(function(t){return null==t?It:(Nt||(Nt=document.createElementNS("http://www.w3.org/2000/svg","g")),Nt.setAttribute("transform",t),(t=Nt.transform.baseVal.consolidate())?(t=t.matrix,qt(t.a,t.b,t.c,t.d,t.e,t.f)):It)},", ",")",")");function Ut(t){return function(n,e){var r=t((n=k(n)).h,(e=k(e)).h),i=_t(n.s,e.s),o=_t(n.l,e.l),a=_t(n.opacity,e.opacity);return function(t){return n.h=r(t),n.s=i(t),n.l=o(t),n.opacity=a(t),n+""}}}function Ot(t){return function(n,e){var r=t((n=X(n)).h,(e=X(e)).h),i=_t(n.c,e.c),o=_t(n.l,e.l),a=_t(n.opacity,e.opacity);return function(t){return n.h=r(t),n.c=i(t),n.l=o(t),n.opacity=a(t),n+""}}}function Wt(t){return function n(e){function r(n,r){var i=t((n=tt(n)).h,(r=tt(r)).h),o=_t(n.s,r.s),a=_t(n.l,r.l),u=_t(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=o(t),n.l=a(Math.pow(t,e)),n.opacity=u(t),n+""}}return e=+e,r.gamma=n,r}(1)}Math.SQRT2,Ut(gt),Ut(_t),Ot(gt),Ot(_t),Wt(gt),Wt(_t);var jt=function(t){return function(){return t}},Ft=function(t){return+t},Bt=[0,1];function Xt(t){return t}function Yt(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:jt(isNaN(n)?NaN:.5)}function Ht(t){var n,e=t[0],r=t[t.length-1];return e>r&&(n=e,e=r,r=n),function(t){return Math.max(e,Math.min(r,t))}}function Vt(t,n,e){var r=t[0],i=t[1],o=n[0],a=n[1];return i<r?(r=Yt(i,r),o=e(a,o)):(r=Yt(r,i),o=e(o,a)),function(t){return o(r(t))}}function $t(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<r;)i[a]=Yt(t[a],t[a+1]),o[a]=e(n[a],n[a+1]);return function(n){var e=ot(t,n,1,r)-1;return o[e](i[e](n))}}function Zt(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Qt(){var t,n,e,r,i,o,a=Bt,u=Bt,s=Pt,c=Xt;function h(){return r=Math.min(a.length,u.length)>2?$t:Vt,i=o=null,l}function l(n){return isNaN(n=+n)?e:(i||(i=r(a.map(t),u,s)))(t(c(n)))}return l.invert=function(e){return c(n((o||(o=r(u,a.map(t),kt)))(e)))},l.domain=function(t){return arguments.length?(a=Array.from(t,Ft),c===Xt||(c=Ht(a)),h()):a.slice()},l.range=function(t){return arguments.length?(u=Array.from(t),h()):u.slice()},l.rangeRound=function(t){return u=Array.from(t),s=Ct,h()},l.clamp=function(t){return arguments.length?(c=t?Ht(a):Xt,l):c!==Xt},l.interpolate=function(t){return arguments.length?(s=t,h()):s},l.unknown=function(t){return arguments.length?(e=t,l):e},function(e,r){return t=e,n=r,h()}}var Gt=function(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]},Jt=function(t){return(t=Gt(Math.abs(t)))?t[1]:NaN},Kt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function tn(t){return new nn(t)}function nn(t){if(!(n=Kt.exec(t)))throw new Error("invalid format: "+t);var n;this.fill=n[1]||" ",this.align=n[2]||">",this.sign=n[3]||"-",this.symbol=n[4]||"",this.zero=!!n[5],this.width=n[6]&&+n[6],this.comma=!!n[7],this.precision=n[8]&&+n[8].slice(1),this.trim=!!n[9],this.type=n[10]||""}tn.prototype=nn.prototype,nn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var en,rn,on,an,un=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(i>0){if(!+t[r])break t;i=0}}return i>0?t.slice(0,i)+t.slice(n+1):t},sn=function(t,n){var e=Gt(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},cn={"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return sn(100*t,n)},r:sn,s:function(t,n){var e=Gt(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(en=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Gt(t,Math.max(0,n+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},hn=function(t){return t},ln=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];rn=function(t){var n,e,r=t.grouping&&t.thousands?(n=t.grouping,e=t.thousands,function(t,r){for(var i=t.length,o=[],a=0,u=n[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),o.push(t.substring(i-=u,i+u)),!((s+=u+1)>r));)u=n[a=(a+1)%n.length];return o.reverse().join(e)}):hn,i=t.currency,o=t.decimal,a=t.numerals?function(t){return function(n){return n.replace(/[0-9]/g,function(n){return t[+n]})}}(t.numerals):hn,u=t.percent||"%";function s(t){var n=(t=tn(t)).fill,e=t.align,s=t.sign,c=t.symbol,h=t.zero,l=t.width,f=t.comma,y=t.precision,p=t.trim,d=t.type;"n"===d?(f=!0,d="g"):cn[d]||(null==y&&(y=12),p=!0,d="g"),(h||"0"===n&&"="===e)&&(h=!0,n="0",e="=");var x="$"===c?i[0]:"#"===c&&/[boxX]/.test(d)?"0"+d.toLowerCase():"",v="$"===c?i[1]:/[%p]/.test(d)?u:"",g=cn[d],_=/[defgprs%]/.test(d);function m(t){var i,u,c,m=x,w=v;if("c"===d)w=g(t)+w,t="";else{var b=(t=+t)<0;if(t=g(Math.abs(t),y),p&&(t=un(t)),b&&0==+t&&(b=!1),m=(b?"("===s?s:"-":"-"===s||"("===s?"":s)+m,w=("s"===d?ln[8+en/3]:"")+w+(b&&"("===s?")":""),_)for(i=-1,u=t.length;++i<u;)if(48>(c=t.charCodeAt(i))||c>57){w=(46===c?o+t.slice(i+1):t.slice(i))+w,t=t.slice(0,i);break}}f&&!h&&(t=r(t,1/0));var M=m.length+t.length+w.length,z=M<l?new Array(l-M+1).join(n):"";switch(f&&h&&(t=r(z+t,z.length?l-w.length:1/0),z=""),e){case"<":t=m+t+w+z;break;case"=":t=m+z+t+w;break;case"^":t=z.slice(0,M=z.length>>1)+m+t+w+z.slice(M);break;default:t=z+m+t+w}return a(t)}return y=null==y?6:/[gprs]/.test(d)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),m.toString=function(){return t+""},m}return{format:s,formatPrefix:function(t,n){var e=s(((t=tn(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Jt(n)/3))),i=Math.pow(10,-r),o=ln[8+r/3];return function(t){return e(i*t)+o}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),on=rn.format,an=rn.formatPrefix;var fn=function(t,n,e,r){var i,o=function(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=ct?i*=10:o>=ht?i*=5:o>=lt&&(i*=2),n<t?-i:i}(t,n,e);switch((r=tn(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(n));return null!=r.precision||isNaN(i=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Jt(n)/3)))-Jt(Math.abs(t)))}(o,a))||(r.precision=i),an(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,Jt(n)-Jt(t))+1}(o,Math.max(Math.abs(t),Math.abs(n))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Jt(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return on(r)};function yn(t){var n=t.domain;return t.ticks=function(t){var e=n();return ft(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return fn(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var r,i=n(),o=0,a=i.length-1,u=i[o],s=i[a];return s<u&&(r=u,u=s,s=r,r=o,o=a,a=r),(r=yt(u,s,e))>0?r=yt(u=Math.floor(u/r)*r,s=Math.ceil(s/r)*r,e):r<0&&(r=yt(u=Math.ceil(u*r)/r,s=Math.floor(s*r)/r,e)),r>0?(i[o]=Math.floor(u/r)*r,i[a]=Math.ceil(s/r)*r,n(i)):r<0&&(i[o]=Math.ceil(u*r)/r,i[a]=Math.floor(s*r)/r,n(i)),t},t}function pn(){var t=function(t,n){return Qt()(t,n)}(Xt,Xt);return t.copy=function(){return Zt(t,pn())},pt.apply(t,arguments),yn(t)}function dn(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function xn(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function vn(t){return t<0?-t*t:t*t}function gn(){return function t(){var n=function(t){var n=t(Xt,Xt),e=1;return n.exponent=function(n){return arguments.length?1==(e=+n)?t(Xt,Xt):.5===e?t(xn,vn):t(dn(e),dn(1/e)):e},yn(n)}(Qt());return n.copy=function(){return Zt(n,t()).exponent(n.exponent())},pt.apply(n,arguments),n}.apply(null,arguments).exponent(.5)}var _n=new Date,mn=new Date;function wn(t,n,e,r){function i(n){return t(n=new Date(+n)),n}return i.floor=i,i.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},i.round=function(t){var n=i(t),e=i.ceil(t);return t-n<e-t?n:e},i.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(e,r,o){var a,u=[];if(e=i.ceil(e),o=null==o?1:Math.floor(o),!(e<r&&o>0))return u;do{u.push(a=new Date(+e)),n(e,o),t(e)}while(a<e&&e<r);return u},i.filter=function(e){return wn(function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););})},e&&(i.count=function(n,r){return _n.setTime(+n),mn.setTime(+r),t(_n),t(mn),Math.floor(e(_n,mn))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(n){return r(n)%t==0}:function(n){return i.count(0,n)%t==0}):i:null}),i}var bn=wn(function(){},function(t,n){t.setTime(+t+n)},function(t,n){return n-t});bn.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?wn(function(n){n.setTime(Math.floor(n/t)*t)},function(n,e){n.setTime(+n+e*t)},function(n,e){return(e-n)/t}):bn:null},bn.range;var Mn=6e4,zn=6048e5,Nn=(((wn(function(t){t.setTime(t-t.getMilliseconds())},function(t,n){t.setTime(+t+1e3*n)},function(t,n){return(n-t)/1e3},function(t){return t.getUTCSeconds()}).range,wn(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,n){t.setTime(+t+n*Mn)},function(t,n){return(n-t)/Mn},function(t){return t.getMinutes()})).range,wn(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*Mn)},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getHours()})).range,wn(function(t){t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Mn)/864e5},function(t){return t.getDate()-1})),kn=Nn;function Sn(t){return wn(function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+7*n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Mn)/zn})}Nn.range;var An=Sn(0),Tn=Sn(1),Pn=Sn(2),Cn=Sn(3),En=Sn(4),In=Sn(5),qn=Sn(6),Rn=((An.range,Tn.range,Pn.range,Cn.range,En.range,In.range,qn.range,wn(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,n){t.setMonth(t.getMonth()+n)},function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())},function(t){return t.getMonth()})).range,wn(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t,n){return n.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));Rn.every=function(t){return isFinite(t=Math.floor(t))&&t>0?wn(function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,e){n.setFullYear(n.getFullYear()+e*t)}):null};var Dn=Rn,Ln=(((Rn.range,wn(function(t){t.setUTCSeconds(0,0)},function(t,n){t.setTime(+t+n*Mn)},function(t,n){return(n-t)/Mn},function(t){return t.getUTCMinutes()})).range,wn(function(t){t.setUTCMinutes(0,0,0)},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getUTCHours()})).range,wn(function(t){t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n)},function(t,n){return(n-t)/864e5},function(t){return t.getUTCDate()-1})),Un=Ln;function On(t){return wn(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+7*n)},function(t,n){return(n-t)/zn})}Ln.range;var Wn=On(0),jn=On(1),Fn=On(2),Bn=On(3),Xn=On(4),Yn=On(5),Hn=On(6),Vn=((Wn.range,jn.range,Fn.range,Bn.range,Xn.range,Yn.range,Hn.range,wn(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCMonth(t.getUTCMonth()+n)},function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()})).range,wn(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)},function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));Vn.every=function(t){return isFinite(t=Math.floor(t))&&t>0?wn(function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)}):null};var $n=Vn;function Zn(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Qn(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Gn(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}Vn.range;var Jn,Kn,te,ne={"-":"",_:" ",0:"0"},ee=/^\s*\d+/,re=/^%/,ie=/[\\^$*+?|[\]().{}]/g;function oe(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function ae(t){return t.replace(ie,"\\$&")}function ue(t){return new RegExp("^(?:"+t.map(ae).join("|")+")","i")}function se(t){for(var n={},e=-1,r=t.length;++e<r;)n[t[e].toLowerCase()]=e;return n}function ce(t,n,e){var r=ee.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function he(t,n,e){var r=ee.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function le(t,n,e){var r=ee.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function fe(t,n,e){var r=ee.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function ye(t,n,e){var r=ee.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function pe(t,n,e){var r=ee.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function de(t,n,e){var r=ee.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function xe(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function ve(t,n,e){var r=ee.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function ge(t,n,e){var r=ee.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function _e(t,n,e){var r=ee.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function me(t,n,e){var r=ee.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function we(t,n,e){var r=ee.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function be(t,n,e){var r=ee.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function Me(t,n,e){var r=ee.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function ze(t,n,e){var r=ee.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function Ne(t,n,e){var r=re.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function ke(t,n,e){var r=ee.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function Se(t,n,e){var r=ee.exec(n.slice(e));return r?(t.Q=1e3*+r[0],e+r[0].length):-1}function Ae(t,n){return oe(t.getDate(),n,2)}function Te(t,n){return oe(t.getHours(),n,2)}function Pe(t,n){return oe(t.getHours()%12||12,n,2)}function Ce(t,n){return oe(1+kn.count(Dn(t),t),n,3)}function Ee(t,n){return oe(t.getMilliseconds(),n,3)}function Ie(t,n){return Ee(t,n)+"000"}function qe(t,n){return oe(t.getMonth()+1,n,2)}function Re(t,n){return oe(t.getMinutes(),n,2)}function De(t,n){return oe(t.getSeconds(),n,2)}function Le(t){var n=t.getDay();return 0===n?7:n}function Ue(t,n){return oe(An.count(Dn(t),t),n,2)}function Oe(t,n){var e=t.getDay();return t=e>=4||0===e?En(t):En.ceil(t),oe(En.count(Dn(t),t)+(4===Dn(t).getDay()),n,2)}function We(t){return t.getDay()}function je(t,n){return oe(Tn.count(Dn(t),t),n,2)}function Fe(t,n){return oe(t.getFullYear()%100,n,2)}function Be(t,n){return oe(t.getFullYear()%1e4,n,4)}function Xe(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+oe(n/60|0,"0",2)+oe(n%60,"0",2)}function Ye(t,n){return oe(t.getUTCDate(),n,2)}function He(t,n){return oe(t.getUTCHours(),n,2)}function Ve(t,n){return oe(t.getUTCHours()%12||12,n,2)}function $e(t,n){return oe(1+Un.count($n(t),t),n,3)}function Ze(t,n){return oe(t.getUTCMilliseconds(),n,3)}function Qe(t,n){return Ze(t,n)+"000"}function Ge(t,n){return oe(t.getUTCMonth()+1,n,2)}function Je(t,n){return oe(t.getUTCMinutes(),n,2)}function Ke(t,n){return oe(t.getUTCSeconds(),n,2)}function tr(t){var n=t.getUTCDay();return 0===n?7:n}function nr(t,n){return oe(Wn.count($n(t),t),n,2)}function er(t,n){var e=t.getUTCDay();return t=e>=4||0===e?Xn(t):Xn.ceil(t),oe(Xn.count($n(t),t)+(4===$n(t).getUTCDay()),n,2)}function rr(t){return t.getUTCDay()}function ir(t,n){return oe(jn.count($n(t),t),n,2)}function or(t,n){return oe(t.getUTCFullYear()%100,n,2)}function ar(t,n){return oe(t.getUTCFullYear()%1e4,n,4)}function ur(){return"+0000"}function sr(){return"%"}function cr(t){return+t}function hr(t){return Math.floor(+t/1e3)}function lr(t){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fr(t,n,e){!function(t){return"object"===lr(t)&&!Array.isArray(t)}(e)?Array.isArray(e)?t[n]=e.slice():t[n]=e:t[n]=Object.assign({},e)}function yr(t,n){var e={};for(var r in t)for(var i in e[r]={},t[r])if(n&&n[r]&&void 0!==n[r][i]){var o=n[r][i];fr(e[r],i,o)}else{var a=t[r][i];fr(e[r],i,a)}return e.viz.width=e.viz.width-e.viz.margin.left-e.viz.margin.right,e.viz.height=e.viz.height-e.viz.margin.top-e.viz.margin.bottom,e}function pr(t,n){return Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)<=Math.pow(t.r+n.r,2)}function dr(t,n){return{x:Math.cos(n)*t,y:Math.sin(n)*t}}(Jn=function(t){var n=t.dateTime,e=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,u=t.months,s=t.shortMonths,c=ue(i),h=se(i),l=ue(o),f=se(o),y=ue(a),p=se(a),d=ue(u),x=se(u),v=ue(s),g=se(s),_={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return s[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:null,d:Ae,e:Ae,f:Ie,H:Te,I:Pe,j:Ce,L:Ee,m:qe,M:Re,p:function(t){return i[+(t.getHours()>=12)]},Q:cr,s:hr,S:De,u:Le,U:Ue,V:Oe,w:We,W:je,x:null,X:null,y:Fe,Y:Be,Z:Xe,"%":sr},m={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return s[t.getUTCMonth()]},B:function(t){return u[t.getUTCMonth()]},c:null,d:Ye,e:Ye,f:Qe,H:He,I:Ve,j:$e,L:Ze,m:Ge,M:Je,p:function(t){return i[+(t.getUTCHours()>=12)]},Q:cr,s:hr,S:Ke,u:tr,U:nr,V:er,w:rr,W:ir,x:null,X:null,y:or,Y:ar,Z:ur,"%":sr},w={a:function(t,n,e){var r=y.exec(n.slice(e));return r?(t.w=p[r[0].toLowerCase()],e+r[0].length):-1},A:function(t,n,e){var r=l.exec(n.slice(e));return r?(t.w=f[r[0].toLowerCase()],e+r[0].length):-1},b:function(t,n,e){var r=v.exec(n.slice(e));return r?(t.m=g[r[0].toLowerCase()],e+r[0].length):-1},B:function(t,n,e){var r=d.exec(n.slice(e));return r?(t.m=x[r[0].toLowerCase()],e+r[0].length):-1},c:function(t,e,r){return z(t,n,e,r)},d:ge,e:ge,f:ze,H:me,I:me,j:_e,L:Me,m:ve,M:we,p:function(t,n,e){var r=c.exec(n.slice(e));return r?(t.p=h[r[0].toLowerCase()],e+r[0].length):-1},Q:ke,s:Se,S:be,u:he,U:le,V:fe,w:ce,W:ye,x:function(t,n,r){return z(t,e,n,r)},X:function(t,n,e){return z(t,r,n,e)},y:de,Y:pe,Z:xe,"%":Ne};function b(t,n){return function(e){var r,i,o,a=[],u=-1,s=0,c=t.length;for(e instanceof Date||(e=new Date(+e));++u<c;)37===t.charCodeAt(u)&&(a.push(t.slice(s,u)),null!=(i=ne[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(o=n[r])&&(r=o(e,i)),a.push(r),s=u+1);return a.push(t.slice(s,u)),a.join("")}}function M(t,n){return function(e){var r,i,o=Gn(1900);if(z(o,t,e+="",0)!=e.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=(i=(r=Qn(Gn(o.y))).getUTCDay())>4||0===i?jn.ceil(r):jn(r),r=Un.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(r=(i=(r=n(Gn(o.y))).getDay())>4||0===i?Tn.ceil(r):Tn(r),r=kn.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Qn(Gn(o.y)).getUTCDay():n(Gn(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Qn(o)):n(o)}}function z(t,n,e,r){for(var i,o,a=0,u=n.length,s=e.length;a<u;){if(r>=s)return-1;if(37===(i=n.charCodeAt(a++))){if(i=n.charAt(a++),!(o=w[i in ne?n.charAt(a++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return _.x=b(e,_),_.X=b(r,_),_.c=b(n,_),m.x=b(e,m),m.X=b(r,m),m.c=b(n,m),{format:function(t){var n=b(t+="",_);return n.toString=function(){return t},n},parse:function(t){var n=M(t+="",Zn);return n.toString=function(){return t},n},utcFormat:function(t){var n=b(t+="",m);return n.toString=function(){return t},n},utcParse:function(t){var n=M(t,Qn);return n.toString=function(){return t},n}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).format,Jn.parse,Kn=Jn.utcFormat,te=Jn.utcParse,Date.prototype.toISOString||Kn("%Y-%m-%dT%H:%M:%S.%LZ"),+new Date("2000-01-01T00:00:00.000Z")||te("%Y-%m-%dT%H:%M:%S.%LZ"),function t(n){function e(t){return Math.pow(t,n)}return n=+n,e.exponent=t,e}(3),function t(n){function e(t){return 1-Math.pow(1-t,n)}return n=+n,e.exponent=t,e}(3),function t(n){function e(t){return((t*=2)<=1?Math.pow(t,n):2-Math.pow(2-t,n))/2}return n=+n,e.exponent=t,e}(3),Math.PI,function t(n){function e(t){return t*t*((n+1)*t-n)}return n=+n,e.overshoot=t,e}(1.70158);var xr=function t(n){function e(t){return--t*t*((n+1)*t+n)+1}return n=+n,e.overshoot=t,e}(1.70158),vr=(function t(n){function e(t){return((t*=2)<1?t*t*((n+1)*t-n):(t-=2)*t*((n+1)*t+n)+2)/2}return n=+n,e.overshoot=t,e}(1.70158),2*Math.PI),gr=(function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=vr);function i(t){return n*Math.pow(2,10*--t)*Math.sin((r-t)/e)}return i.amplitude=function(n){return t(n,e*vr)},i.period=function(e){return t(n,e)},i}(1,.3),function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=vr);function i(t){return 1-n*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/e)}return i.amplitude=function(n){return t(n,e*vr)},i.period=function(e){return t(n,e)},i}(1,.3),function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=vr);function i(t){return((t=2*t-1)<0?n*Math.pow(2,10*t)*Math.sin((r-t)/e):2-n*Math.pow(2,-10*t)*Math.sin((r+t)/e))/2}return i.amplitude=function(n){return t(n,e*vr)},i.period=function(e){return t(n,e)},i}(1,.3),e(6)),_r=e.n(gr),mr="http://www.w3.org/1999/xhtml",wr={svg:"http://www.w3.org/2000/svg",xhtml:mr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},br=function(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),wr.hasOwnProperty(n)?{space:wr[n],local:t}:t},Mr=function(t){var n=br(t);return(n.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===mr&&n.documentElement.namespaceURI===mr?n.createElement(t):n.createElementNS(e,t)}})(n)};function zr(){}var Nr=function(t){return null==t?zr:function(){return this.querySelector(t)}};function kr(){return[]}var Sr=function(t){return null==t?kr:function(){return this.querySelectorAll(t)}},Ar=function(t){return function(){return this.matches(t)}},Tr=function(t){return new Array(t.length)};function Pr(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}Pr.prototype={constructor:Pr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Cr="$";function Er(t,n,e,r,i,o){for(var a,u=0,s=n.length,c=o.length;u<c;++u)(a=n[u])?(a.__data__=o[u],r[u]=a):e[u]=new Pr(t,o[u]);for(;u<s;++u)(a=n[u])&&(i[u]=a)}function Ir(t,n,e,r,i,o,a){var u,s,c,h={},l=n.length,f=o.length,y=new Array(l);for(u=0;u<l;++u)(s=n[u])&&(y[u]=c=Cr+a.call(s,s.__data__,u,n),c in h?i[u]=s:h[c]=s);for(u=0;u<f;++u)(s=h[c=Cr+a.call(t,o[u],u,o)])?(r[u]=s,s.__data__=o[u],h[c]=null):e[u]=new Pr(t,o[u]);for(u=0;u<l;++u)(s=n[u])&&h[y[u]]===s&&(i[u]=s)}function qr(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}var Rr=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function Dr(t,n){return t.style.getPropertyValue(n)||Rr(t).getComputedStyle(t,null).getPropertyValue(n)}function Lr(t){return t.trim().split(/^|\s+/)}function Ur(t){return t.classList||new Or(t)}function Or(t){this._node=t,this._names=Lr(t.getAttribute("class")||"")}function Wr(t,n){for(var e=Ur(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function jr(t,n){for(var e=Ur(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function Fr(){this.textContent=""}function Br(){this.innerHTML=""}function Xr(){this.nextSibling&&this.parentNode.appendChild(this)}function Yr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Hr(){return null}function Vr(){var t=this.parentNode;t&&t.removeChild(this)}function $r(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function Zr(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}Or.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Qr={},Gr=null;function Jr(t,n,e){return t=Kr(t,n,e),function(n){var e=n.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||t.call(this,n)}}function Kr(t,n,e){return function(r){var i=Gr;Gr=r;try{t.call(this,this.__data__,n,e)}finally{Gr=i}}}function ti(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.capture);++i?n.length=i:delete this.__on}}}function ni(t,n,e){var r=Qr.hasOwnProperty(t.type)?Jr:Kr;return function(i,o,a){var u,s=this.__on,c=r(n,o,a);if(s)for(var h=0,l=s.length;h<l;++h)if((u=s[h]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=c,u.capture=e),void(u.value=n);this.addEventListener(t.type,c,e),u={type:t.type,name:t.name,value:n,listener:c,capture:e},s?s.push(u):this.__on=[u]}}function ei(t,n,e){var r=Rr(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Qr={mouseenter:"mouseover",mouseleave:"mouseout"}));var ri=[null];function ii(t,n){this._groups=t,this._parents=n}function oi(){return new ii([[document.documentElement]],ri)}ii.prototype=oi.prototype={constructor:ii,select:function(t){"function"!=typeof t&&(t=Nr(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a,u=n[i],s=u.length,c=r[i]=new Array(s),h=0;h<s;++h)(o=u[h])&&(a=t.call(o,o.__data__,h,u))&&("__data__"in o&&(a.__data__=o.__data__),c[h]=a);return new ii(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=Sr(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a,u=n[o],s=u.length,c=0;c<s;++c)(a=u[c])&&(r.push(t.call(a,a.__data__,c,u)),i.push(a));return new ii(r,i)},filter:function(t){"function"!=typeof t&&(t=Ar(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],u=a.length,s=r[i]=[],c=0;c<u;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&s.push(o);return new ii(r,this._parents)},data:function(t,n){if(!t)return p=new Array(this.size()),h=-1,this.each(function(t){p[++h]=t}),p;var e,r=n?Ir:Er,i=this._parents,o=this._groups;"function"!=typeof t&&(e=t,t=function(){return e});for(var a=o.length,u=new Array(a),s=new Array(a),c=new Array(a),h=0;h<a;++h){var l=i[h],f=o[h],y=f.length,p=t.call(l,l&&l.__data__,h,i),d=p.length,x=s[h]=new Array(d),v=u[h]=new Array(d);r(l,f,x,v,c[h]=new Array(y),p,n);for(var g,_,m=0,w=0;m<d;++m)if(g=x[m]){for(m>=w&&(w=m+1);!(_=v[w])&&++w<d;);g._next=_||null}}return(u=new ii(u,i))._enter=s,u._exit=c,u},enter:function(){return new ii(this._enter||this._groups.map(Tr),this._parents)},exit:function(){return new ii(this._exit||this._groups.map(Tr),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=n&&(i=n(i)),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var s,c=n[u],h=e[u],l=c.length,f=a[u]=new Array(l),y=0;y<l;++y)(s=c[y]||h[y])&&(f[y]=s);for(;u<r;++u)a[u]=n[u];return new ii(a,this._parents)},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=qr);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a,u=e[o],s=u.length,c=i[o]=new Array(s),h=0;h<s;++h)(a=u[h])&&(c[h]=a);c.sort(n)}return new ii(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,n){var e=br(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof n?e.local?function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}:function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}:e.local?function(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}:function(t,n){return function(){this.setAttribute(t,n)}})(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof n?function(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}:function(t,n,e){return function(){this.style.setProperty(t,n,e)}})(t,n,null==e?"":e)):Dr(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?function(t){return function(){delete this[t]}}:"function"==typeof n?function(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}:function(t,n){return function(){this[t]=n}})(t,n)):this.node()[t]},classed:function(t,n){var e=Lr(t+"");if(arguments.length<2){for(var r=Ur(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?function(t,n){return function(){(n.apply(this,arguments)?Wr:jr)(this,t)}}:n?function(t){return function(){Wr(this,t)}}:function(t){return function(){jr(this,t)}})(e,n))},text:function(t){return arguments.length?this.each(null==t?Fr:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Br:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(Xr)},lower:function(){return this.each(Yr)},append:function(t){var n="function"==typeof t?t:Mr(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(t,n){var e="function"==typeof t?t:Mr(t),r=null==n?Hr:"function"==typeof n?n:Nr(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(Vr)},clone:function(t){return this.select(t?Zr:$r)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}})}(t+""),a=o.length;if(!(arguments.length<2)){for(u=n?ni:ti,null==e&&(e=!1),r=0;r<a;++r)this.each(u(o[r],n,e));return this}var u=this.node().__on;if(u)for(var s,c=0,h=u.length;c<h;++c)for(r=0,s=u[c];r<a;++r)if((i=o[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(t,n){return this.each(("function"==typeof n?function(t,n){return function(){return ei(this,t,n.apply(this,arguments))}}:function(t,n){return function(){return ei(this,t,n)}})(t,n))}};var ai=oi,ui=function(t){return"string"==typeof t?new ii([[document.querySelector(t)]],[document.documentElement]):new ii([[t]],ri)},si=0;function ci(){this._="@"+(++si).toString(36)}ci.prototype=function(){return new ci}.prototype={constructor:ci,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var hi={value:function(){}};function li(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new fi(r)}function fi(t){this._=t}function yi(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function pi(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=hi,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}fi.prototype=li.prototype={constructor:fi,on:function(t,n){var e,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");if(e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})),a=-1,u=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++a<u;)if(e=(t=o[a]).type)i[e]=pi(i[e],t.name,n);else if(null==n)for(e in i)i[e]=pi(i[e],t.name,null);return this}for(;++a<u;)if((e=(t=o[a]).type)&&(e=yi(i[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new fi(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var di,xi,vi=li,gi=0,_i=0,mi=0,wi=1e3,bi=0,Mi=0,zi=0,Ni="object"==typeof performance&&performance.now?performance:Date,ki="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Si(){return Mi||(ki(Ai),Mi=Ni.now()+zi)}function Ai(){Mi=0}function Ti(){this._call=this._time=this._next=null}function Pi(t,n,e){var r=new Ti;return r.restart(t,n,e),r}function Ci(){Mi=(bi=Ni.now())+zi,gi=_i=0;try{!function(){Si(),++gi;for(var t,n=di;n;)(t=Mi-n._time)>=0&&n._call.call(null,t),n=n._next;--gi}()}finally{gi=0,function(){for(var t,n,e=di,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:di=n);xi=t,Ii(r)}(),Mi=0}}function Ei(){var t=Ni.now(),n=t-bi;n>wi&&(zi-=n,bi=t)}function Ii(t){gi||(_i&&(_i=clearTimeout(_i)),t-Mi>24?(t<1/0&&(_i=setTimeout(Ci,t-Ni.now()-zi)),mi&&(mi=clearInterval(mi))):(mi||(bi=Ni.now(),mi=setInterval(Ei,wi)),gi=1,ki(Ci)))}Ti.prototype=Pi.prototype={constructor:Ti,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?Si():+e)+(null==n?0:+n),this._next||xi===this||(xi?xi._next=this:di=this,xi=this),this._call=t,this._time=e,Ii()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ii())}};var qi=function(t,n,e){var r=new Ti;return n=null==n?0:+n,r.restart(function(e){r.stop(),t(e+n)},n,e),r},Ri=vi("start","end","cancel","interrupt"),Di=[],Li=0,Ui=1,Oi=2,Wi=3,ji=4,Fi=5,Bi=6,Xi=function(t,n,e,r,i,o){var a=t.__transition;if(a){if(e in a)return}else t.__transition={};!function(t,n,e){var r,i=t.__transition;function o(s){var c,h,l,f;if(e.state!==Ui)return u();for(c in i)if((f=i[c]).name===e.name){if(f.state===Wi)return qi(o);f.state===ji?(f.state=Bi,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[c]):+c<n&&(f.state=Bi,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[c])}if(qi(function(){e.state===Wi&&(e.state=ji,e.timer.restart(a,e.delay,e.time),a(s))}),e.state=Oi,e.on.call("start",t,t.__data__,e.index,e.group),e.state===Oi){for(e.state=Wi,r=new Array(l=e.tween.length),c=0,h=-1;c<l;++c)(f=e.tween[c].value.call(t,t.__data__,e.index,e.group))&&(r[++h]=f);r.length=h+1}}function a(n){for(var i=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(u),e.state=Fi,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);e.state===Fi&&(e.on.call("end",t,t.__data__,e.index,e.group),u())}function u(){for(var r in e.state=Bi,e.timer.stop(),delete i[n],i)return;delete t.__transition}i[n]=e,e.timer=Pi(function(t){e.state=Ui,e.timer.restart(o,e.delay,e.time),e.delay<=t&&o(t-e.delay)},0,e.time)}(t,e,{name:n,index:r,group:i,on:Ri,tween:Di,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Li})};function Yi(t,n){var e=Vi(t,n);if(e.state>Li)throw new Error("too late; already scheduled");return e}function Hi(t,n){var e=Vi(t,n);if(e.state>Wi)throw new Error("too late; already running");return e}function Vi(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function $i(t,n,e){var r=t._id;return t.each(function(){var t=Hi(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)}),function(t){return Vi(t,r).value[n]}}var Zi=function(t,n){var e;return("number"==typeof n?kt:n instanceof g?mt:(e=g(n))?(n=e,mt):Tt)(t,n)},Qi=ai.prototype.constructor;function Gi(t){return function(){this.style.removeProperty(t)}}var Ji=0;function Ki(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function to(t){return ai().transition(t)}function no(){return++Ji}var eo=ai.prototype;Ki.prototype=to.prototype={constructor:Ki,select:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=Nr(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var u,s,c=r[a],h=c.length,l=o[a]=new Array(h),f=0;f<h;++f)(u=c[f])&&(s=t.call(u,u.__data__,f,c))&&("__data__"in u&&(s.__data__=u.__data__),l[f]=s,Xi(l[f],n,e,f,l,Vi(u,e)));return new Ki(o,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=Sr(t));for(var r=this._groups,i=r.length,o=[],a=[],u=0;u<i;++u)for(var s,c=r[u],h=c.length,l=0;l<h;++l)if(s=c[l]){for(var f,y=t.call(s,s.__data__,l,c),p=Vi(s,e),d=0,x=y.length;d<x;++d)(f=y[d])&&Xi(f,n,e,d,y,p);o.push(y),a.push(s)}return new Ki(o,a,n,e)},filter:function(t){"function"!=typeof t&&(t=Ar(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],u=a.length,s=r[i]=[],c=0;c<u;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&s.push(o);return new Ki(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var s,c=n[u],h=e[u],l=c.length,f=a[u]=new Array(l),y=0;y<l;++y)(s=c[y]||h[y])&&(f[y]=s);for(;u<r;++u)a[u]=n[u];return new Ki(a,this._parents,this._name,this._id)},selection:function(){return new Qi(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=no(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],s=u.length,c=0;c<s;++c)if(a=u[c]){var h=Vi(a,n);Xi(a,t,e,c,u,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Ki(r,this._parents,t,e)},call:eo.call,nodes:eo.nodes,node:eo.node,size:eo.size,empty:eo.empty,each:eo.each,on:function(t,n){var e=this._id;return arguments.length<2?Vi(this.node(),e).on.on(t):this.each(function(t,n,e){var r,i,o=(n+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t})?Yi:Hi;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(n,e),a.on=i}}(e,t,n))},attr:function(t,n){var e=br(t),r="transform"===e?Lt:Zi;return this.attrTween(t,"function"==typeof n?(e.local?function(t,n,e){var r,i,o;return function(){var a,u,s=e(this);if(null!=s)return(a=this.getAttributeNS(t.space,t.local))===(u=s+"")?null:a===r&&u===i?o:(i=u,o=n(r=a,s));this.removeAttributeNS(t.space,t.local)}}:function(t,n,e){var r,i,o;return function(){var a,u,s=e(this);if(null!=s)return(a=this.getAttribute(t))===(u=s+"")?null:a===r&&u===i?o:(i=u,o=n(r=a,s));this.removeAttribute(t)}})(e,r,$i(this,"attr."+t,n)):null==n?(e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(e):(e.local?function(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=n(r=a,e)}}:function(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=n(r=a,e)}})(e,r,n))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=br(t);return this.tween(e,(r.local?function(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&function(t,n){return function(e){this.setAttributeNS(t.space,t.local,n(e))}}(t,i)),e}return i._value=n,i}:function(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&function(t,n){return function(e){this.setAttribute(t,n(e))}}(t,i)),e}return i._value=n,i})(r,n))},style:function(t,n,e){var r="transform"==(t+="")?Dt:Zi;return null==n?this.styleTween(t,function(t,n){var e,r,i;return function(){var o=Dr(this,t),a=(this.style.removeProperty(t),Dr(this,t));return o===a?null:o===e&&a===r?i:i=n(e=o,r=a)}}(t,r)).on("end.style."+t,Gi(t)):"function"==typeof n?this.styleTween(t,function(t,n,e){var r,i,o;return function(){var a=Dr(this,t),u=e(this),s=u+"";return null==u&&(this.style.removeProperty(t),s=u=Dr(this,t)),a===s?null:a===r&&s===i?o:(i=s,o=n(r=a,u))}}(t,r,$i(this,"style."+t,n))).each(function(t,n){var e,r,i,o,a="style."+n,u="end."+a;return function(){var s=Hi(this,t),c=s.on,h=null==s.value[a]?o||(o=Gi(n)):void 0;c===e&&i===h||(r=(e=c).copy()).on(u,i=h),s.on=r}}(this._id,t)):this.styleTween(t,function(t,n,e){var r,i,o=e+"";return function(){var a=Dr(this,t);return a===o?null:a===r?i:i=n(r=a,e)}}(t,r,n),e).on("end.style."+t,null)},styleTween:function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,function(t,n,e){var r,i;function o(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,n,e){return function(r){this.style.setProperty(t,n(r),e)}}(t,o,e)),r}return o._value=n,o}(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var n=t(this);this.textContent=null==n?"":n}}($i(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",(t=this._id,function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}));var t},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=Vi(this.node(),e).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?function(t,n){var e,r;return function(){var i=Hi(this,t),o=i.tween;if(o!==e)for(var a=0,u=(r=e=o).length;a<u;++a)if(r[a].name===n){(r=r.slice()).splice(a,1);break}i.tween=r}}:function(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var o=Hi(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:n,value:e},s=0,c=i.length;s<c;++s)if(i[s].name===n){i[s]=u;break}s===c&&i.push(u)}o.tween=i}})(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){Yi(this,t).delay=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){Yi(this,t).delay=n}})(n,t)):Vi(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){Hi(this,t).duration=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){Hi(this,t).duration=n}})(n,t)):Vi(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(function(t,n){if("function"!=typeof n)throw new Error;return function(){Hi(this,t).ease=n}}(n,t)):Vi(this.node(),n).ease},end:function(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(o,a){var u={value:a},s={value:function(){0==--i&&o()}};e.each(function(){var e=Hi(this,r),i=e.on;i!==t&&((n=(t=i).copy())._.cancel.push(u),n._.interrupt.push(u),n._.end.push(s)),e.on=n})})}};var ro={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function io(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))return ro.time=Si(),ro;return e}ai.prototype.interrupt=function(t){return this.each(function(){!function(t,n){var e,r,i,o=t.__transition,a=!0;if(o){for(i in n=null==n?null:n+"",o)(e=o[i]).name===n?(r=e.state>Oi&&e.state<Fi,e.state=Bi,e.timer.stop(),e.on.call(r?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete o[i]):a=!1;a&&delete t.__transition}}(this,t)})},ai.prototype.transition=function(t){var n,e;t instanceof Ki?(n=t._id,t=t._name):(n=no(),(e=ro).time=Si(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],s=u.length,c=0;c<s;++c)(a=u[c])&&Xi(a,t,n,c,u,e||io(a,n));return new Ki(r,this._parents,t,n)};var oo=function(){var t,n,e;function r(t,n){return{param:_r()(t),value:n[t]}}return{createSVG:function(r,i){var o=r.width+r.margin.left+r.margin.right,a=r.height+r.margin.top+r.margin.bottom;t=ui("#"+r.divId).append("svg").attr("id",i||r.svgId).attr("class",r.className).attr("width",o).attr("height",a).append("g").attr("transform","translate(".concat(r.margin.left,", ").concat(r.margin.top,")")),e=r.animation;var u=r.animation?1e3:0;return n=to().duration(u),t},createTspanText:function(n,e){n.forEach(function(n){var r=t.select("#".concat(n.id)),i=(n.text?n.text.replace("%w",n.mainWord):"").split(/(\w+\s\w+)/gi),o=i[i.length-1].split(/(\(\w+\))/g);(i=(i=i.slice(0,i.length-1).concat(o)).filter(function(t){return""!==t&&" "!==t})).forEach(function(t,i){r.append("tspan").attr("x",e.viz.width/2+n.x).attr("y",e.viz.height/2+n.y).attr("dy",i+"em").attr("textAnchor","middle").text(t)})})},drawShape:function(i,o,a){var u="group-".concat(o.class),s=(a?t.append("g").attr("class",u):t.select(".".concat(u))).selectAll(".".concat(o.class)).data(i,function(t,n){return t.id?t.id:n});!function(t,n){var e=s.exit().transition().duration(800).remove();for(var i in n.exit){var o=r(i,n.exit),a=o.param,u=o.value;e.attr(a,u)}}(0,o),function(t,e){var i=t.transition(n).ease(xr);for(var o in e.update){var a=r(o,e.update),u=a.param,s=a.value;"text"===u?i.text(s):i.attr(u,s)}}(s,o),function(t,i){var o=t.enter().append(i.shape).attr("class",i.class);for(var a in i.enter){var u=r(a,i.enter),s=u.param,c=u.value;if("transition"===s){var h=i.enter.transition.delay?i.enter.transition.delay:0;h=e?h:0;var l=o.transition(n).ease(xr).delay(h);for(var f in i.enter.transition){var y=_r()(f),p=i.enter.transition[f];"delay"!==y&&l.attr(y,p)}}else"text"===s?o.text(c):o.attr(s,c)}o.on("click",i.mouseclick),o.on("mouseover",i.mouseover),o.on("mouseout",i.mouseout)}(s,o)},updateShape:function(n,e,i){var o=void 0===i||i,a="string"==typeof n?t.selectAll(n):n,u=!0;for(var s in e){var c=r(s,e),h=c.param,l=c.value;u?a.attr(h,l):(a.transition().ease(xr).duration(o?500:0).attr(h,l),u=!0)}}}},ao={viz:{divId:"viz-container",svgId:"ske-viz-opposite",className:"viz-opposite",width:800,height:500,margin:{top:80,right:50,bottom:60,left:50},mainWordWidth:60,animation:!0,maxItems:void 0},tick:{number:7},text:{show:!0,scale:!0,color:"rgb(255, 255, 255)",size:[13,25],mainWordSize:25,font:"Helvetica, Arial, sans-serif",mouseover:void 0,mouseout:void 0,mouseclick:void 0},circle:{show:!0,color:["rgb(4, 134, 150)","rgb(218, 148, 3)"],size:[0,35],strokeWidth:2,mouseover:void 0,mouseout:void 0,mouseclick:void 0},score:{color:["rgb(13, 108, 120)","rgb(175, 128, 30)"],showNumbers:!1,showText:["← mostly with %w2","equally frequently with %w1 and %w2","mostly with %w1 →"]},category:{showName:!0,showItems:void 0},legend:{color:"rgb(50, 50, 50)"}};function uo(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var so=function(t,n){var e,r,i,o={scoreRange:void 0,scoreColor:void 0,freqRadius:void 0,fontSize:void 0},a={score:void 0},u={circles:{},texts:{}};function s(){return[{id:"main_word-0-".concat(i.mainWords[0].text),text:i.mainWords[0].text,freq:i.mainWords[0].freq,color:r.score.color[1],x:r.viz.width,y:0},{id:"main_word-1-".concat(i.mainWords[1].text),text:i.mainWords[1].text,freq:i.mainWords[1].freq,color:r.score.color[0],x:-r.viz.mainWordWidth,y:0}]}function c(t){var n=function(t){var n="bbox_text_id",i={shape:"text",class:"bbox_text",enter:{id:function(t){return n},x:function(t){return 0},y:function(t){return 0},fontSize:function(t){return o.fontSize(t.freq)},fontFamily:function(t){return r.text.font},text:function(t){return t.text}}};e.drawShape([t],i,!1);var a=t.text.length,u=r.text.size[0],s=document.getElementById(n);if(s){var c=s.getBBox();s.parentElement.removeChild(s),a=c.width,u=c.height}return{width:a,height:u}}(t),i=n.width,a=n.height;return{x:t.x,y:t.y,width:i,height:a,text:t.text,score:t.score,words:t.words,id:t.words[0].id}}function h(t,n){u.circles[n]=[],u.texts[n]=[];var e=t.words.slice().sort(function(t,n){return n.words[0].freq+n.words[1].freq-(t.words[0].freq+t.words[1].freq)});e.forEach(function(t){for(var i=Math.round(1e3*(1/e.length^2)),a={},s=function(){var e=o.freqRadius.range()[1],s=r.viz.height-e;t.x=o.scoreRange(t.score),t.y=Math.floor(Math.random()*(s-e))+e;var h=function(t){var n=o.freqRadius(t.words[0].freq),e=o.freqRadius(t.words[1].freq);return[{x:t.x+n,y:t.y,r:n,freq:t.words[0].freq,score:t.score,color:r.circle.color[1],id:"".concat(t.words[0].id,"__0"),text:t.text,wordX:t.x,wordY:t.y},{x:t.x-e,y:t.y,r:e,freq:t.words[1].freq,score:t.score,color:r.circle.color[0],id:"".concat(t.words[1].id,"__1"),text:t.text,wordX:t.x,wordY:t.y}]}(t);if(void 0===(a=u.circles[n].find(function(t){return pr(t,h[0])||pr(t,h[1])}))){var l=c(t);void 0===(a=u.texts[n].find(function(t){return e=l,r=(n=t).x-n.width/2,i=n.x+n.width/2,o=n.y-n.height/2,a=n.y+n.height/2,u=e.x-e.width/2,s=e.x+e.width/2,c=e.y-e.height/2,h=e.y+e.height/2,!(u>=i||s<=r||c>=a||h<=o);var n,e,r,i,o,a,u,s,c,h}))&&(u.circles[n].push(h[0]),u.circles[n].push(h[1]),u.texts[n].push(l))}i--};i>0&&void 0!==a;)s()})}e=oo(),(r=yr(ao,n)).viz.width-=2*r.viz.mainWordWidth,r.viz.margin.left+=r.viz.mainWordWidth,r.viz.margin.right+=r.viz.mainWordWidth,i=Object.assign({},t),r.category.showItems&&(i.words=r.category.showItems.map(function(n){return t.words[n]})),r.viz.maxItems&&i.words.forEach(function(t){t.words.sort(function(t,n){return Math.abs(t.score)-Math.abs(n.score)}),t.words=t.words.slice(0,r.viz.maxItems)}),function(){var t,n,e,u,s=at((t=[]).concat.apply(t,uo((u="freq",i.words.map(function(t){var n,e=t.words.map(function(t){return[t.words[0][u],t.words[1][u]]});return(n=[]).concat.apply(n,uo(e))}))))),c=at((n=[]).concat.apply(n,uo(i.words.map(function(t){var n,e=t.words.map(function(t){return t.words[0].freq+t.words[1].freq});return(n=[]).concat.apply(n,uo(e))})))),h=i.words.map(function(t){return t.words.map(function(t){return t.score})}),l=function(t){var n=t;if(!n.includes(0)){var e=Math.abs(n[1]-n[0])/2;n=n[0]<0?at([].concat(uo(n),[0,e])):at([-e,0].concat(uo(n)))}var i=pn().domain(n).ticks(r.tick.number),o=i[1]-i[0],a=t[0],u=t[1],s=i[0],c=i[i.length-1];if(a<s){var h=Math.ceil(Math.abs(a-s)/o);st(0,h,1).forEach(function(){i=[s-o].concat(uo(i)),s=i[0]})}if(u>c){var l=Math.ceil(Math.abs(u-c)/o);st(0,l,1).forEach(function(){i=[].concat(uo(i),[c+o]),c=i[i.length-1]})}return i=[i[0]-o].concat(uo(i),[i[i.length-1]+o])}(h=at((e=[]).concat.apply(e,uo(h))));a.score=l;var f,y,p,d,x=(f=h=at(l),p=[-(y=Math.max(Math.abs(f[0]),Math.abs(f[1]))),y],[(d=pn().domain(p).range(r.score.color))(f[0]),d(f[1])]);o.freqRadius=gn().domain(s).range(r.circle.size),o.fontSize=gn().domain(c).range(r.text.size),o.scoreRange=pn().domain(h).range([-r.viz.width/2,+r.viz.width/2]),o.scoreColor=pn().domain(h).range(r.circle.color),o.scoreBackgroundColor=pn().domain(h).range(x)}(),i.words.forEach(function(t,n){var i="".concat(r.viz.svgId,"-").concat(n),c=s();e.createSVG(r.viz,i),h(t,n);var l,f,y,p=(l="score-bg__rect-".concat(n),f=r,y=o,{shape:"rect",class:l,enter:{id:function(t){return"score__rect-"+t.id},x:function(t){return t.x},y:function(t){return t.y},width:function(t){return t.width},height:function(t){return t.height},fill:function(t){return g(y.scoreBackgroundColor(t.score)).brighter(1)},opacity:function(t){return f.viz.animation?0:1},transition:{delay:function(t,n){return Math.abs(50*t.score)},opacity:function(t){return 1}}}});if(e.drawShape(function(t){var n=a.score.slice(0,a.score.length-1),e=o.scoreRange(n[1])-o.scoreRange(n[0]);return n.reverse().map(function(n,i){return{score:n,x:o.scoreRange(n)+r.viz.width/2,y:0,width:e,height:r.viz.height,id:"".concat(t,"-").concat(i)}})}(n),p,!0),r.score.showNumbers){var d=a.score.map(function(t){return{text:t,x:o.scoreRange(t),y:r.viz.height}}),x=function(t,n){return{shape:"rect",class:t,enter:{x:function(t){return n.viz.width/2+t.x},y:function(t){return t.y},width:function(t){return 1},height:function(t){return 5},fill:function(t){return g(n.legend.color).brighter(.5)},opacity:function(t){return n.viz.animation?0:1},transition:{opacity:function(t){return 1}}}}}("score-tick__rect-".concat(n),r),v=function(t,n){return{shape:"text",class:t,enter:{x:function(t){return n.viz.width/2+t.x},y:function(t){return t.y+13},fill:function(t){return g(n.legend.color).brighter(.5)},fontFamily:function(t){return n.text.font},fontSize:function(t){return 10},textAnchor:function(t){return"middle"},alignmentBaseline:function(t){return"middle"},text:function(t){return t.text}}}}("score-tick__text-".concat(n),r);e.drawShape(d,x,!0),e.drawShape(d,v,!0)}else if(r.score.showText){var _=function(t,n){return{shape:"text",class:t,enter:{x:function(t){return t.x},y:function(t){return t.y},fill:function(t){return g(n.legend.color).brighter(.5)},fontFamily:function(t){return n.text.font},fontSize:function(t){return 10},textAnchor:function(t,e){return 0===e?"start":e===n.score.showText.length-1?"end":"middle"},alignmentBaseline:function(t){return"middle"},text:function(t){return t.text}}}}("legend-text-".concat(n),r);e.drawShape(r.score.showText.map(function(t,n){var e=t,i=s();/%w1/g.exec(t)&&(e=t.replace(/%w1/g,i[0].text)),/%w2/g.exec(e)&&(e=e.replace(/%w2/g,i[1].text));var a=r.viz.width/2+o.scoreRange(0);return 0===n?a=n*(r.viz.width/2)-r.viz.mainWordWidth:n===r.score.showText.length-1&&(a=n*(r.viz.width/2)+r.viz.mainWordWidth),{x:a,y:r.viz.height+15,text:e}}),_,!0)}if(r.category.showName){var m="".concat(c[0].text,"/").concat(c[1].text),w=[t.info.name.replace("%w",m)],b=function(t,n){return{shape:"text",class:t,enter:{x:function(t){return n.viz.width/2},y:function(t){return-13},fill:function(t){return n.legend.color},fontFamily:function(t){return n.text.font},fontSize:function(t){return 18},textAnchor:function(t){return"middle"},alignmentBaseline:function(t){return"middle"},text:function(t){return t},opacity:function(t){return n.viz.animation?0:1},transition:{opacity:function(t){return 1}}}}}("category__text-".concat(n),r);e.drawShape(w,b,!0)}var M=function(t,n){return{shape:"rect",class:t,enter:{id:function(t){return t.id+"__rect"},x:function(t){return t.x},y:function(t){return t.y},width:function(t){return n.viz.mainWordWidth},height:function(t){return n.viz.height},fill:function(t){return g(t.color).brighter(.7)},opacity:function(t){return n.viz.animation?0:1},transition:{opacity:function(t){return 1}}}}}("main-word__rect-".concat(n),r);if(e.drawShape(c,M,!0),r.circle.show){var z=function(t,n,e){return{shape:"circle",class:t,enter:{id:function(t){return"word__circle-"+t.id},cx:function(t){return n.viz.width/2+t.x},cy:function(t){return t.y},fill:function(t){return t.color},stroke:function(t){return g(t.color).darker(.5)},strokeWidth:function(t){return n.circle.strokeWidth},r:function(t){return n.viz.animation?0:e.freqRadius(t.freq)},transition:{delay:function(t,e){return n.viz.animation?Math.abs(100*t.score):0},r:function(t){return e.freqRadius(t.freq)}}},exit:{r:0},mouseover:function(t){"function"==typeof n.circle.mouseover&&n.circle.mouseover(t)},mouseout:function(t){"function"==typeof n.circle.mouseout&&n.circle.mouseout(t)},mouseclick:function(t){"function"==typeof n.circle.mouseclick&&n.circle.mouseclick(t)}}}("word__circles-".concat(n),r,o);e.drawShape(u.circles[n],z,!0)}if(r.text.show){var N=function(t,n){var e=function(t){return t.x+n.viz.mainWordWidth/2},r=function(t){return t.y+n.viz.height/2};return{shape:"text",class:t,enter:{id:function(t){return t.id+"__text"},x:function(t){return e(t)},y:function(t){return r(t)},fill:function(t){return n.text.color},fontFamily:function(t){return n.text.font},fontSize:function(t){return n.text.mainWordSize},textAnchor:function(t){return"middle"},alignmentBaseline:function(t){return"middle"},text:function(t){return t.text},transform:function(t){return"rotate(-90 ".concat(e(t)," ").concat(r(t),")")}}}}("main-word__text-".concat(n),r),k=function(t,n,e){return{shape:"text",class:t,enter:{id:function(t){return"word__text-"+t.id},x:function(t){return n.viz.width/2+t.x},y:function(t){return t.y},fill:function(t){return n.text.color},fontSize:function(t){return n.text.scale?e.fontSize(t.words[0].freq+t.words[1].freq):n.text.size[0]},fontFamily:function(t){return n.text.font},textAnchor:function(t){return"middle"},alignmentBaseline:function(t){return"middle"},cursor:function(t){return"pointer"},text:function(t){return t.text},opacity:function(t){return n.viz.animation?0:1},transition:{delay:function(t,e){return n.viz.animation?Math.abs(100*t.score):0},opacity:function(t){return 1}}},update:{fontSize:function(t){return n.text.scale?e.fontSize(t.words[0].freq+t.words[1].freq):n.text.size[0]},text:function(t){return t.text}},exit:{fontSize:function(t){return 0}},mouseover:function(t){"function"==typeof n.text.mouseover&&n.text.mouseover(t)},mouseout:function(t){"function"==typeof n.text.mouseout&&n.text.mouseout(t)},mouseclick:function(t){"function"==typeof n.text.mouseclick&&n.text.mouseclick(t)}}}("word__text-".concat(n),r,o);e.drawShape(c,N,!0),e.drawShape(u.texts[n],k,!0)}})};function co(){}function ho(t,n){var e=new co;if(t instanceof co)t.each(function(t,n){e.set(n,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==n)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n(r=t[i],i,t),r)}else if(t)for(var a in t)e.set(a,t[a]);return e}co.prototype=ho.prototype={constructor:co,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,n){return this["$"+t]=n,this},remove:function(t){var n="$"+t;return n in this&&delete this[n]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var n in this)"$"===n[0]&&t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)"$"===n[0]&&t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)"$"===n[0]&&t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)"$"===n[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var n in this)"$"===n[0]&&t(this[n],n.slice(1),this)}};var lo=ho;function fo(){}var yo=lo.prototype;fo.prototype=function(t,n){var e=new fo;if(t instanceof fo)t.each(function(t){e.add(t)});else if(t){var r=-1,i=t.length;if(null==n)for(;++r<i;)e.add(t[r]);else for(;++r<i;)e.add(n(t[r],r,t))}return e}.prototype={constructor:fo,has:yo.has,add:function(t){return this["$"+(t+="")]=t,this},remove:yo.remove,clear:yo.clear,values:yo.keys,size:yo.size,empty:yo.empty,each:yo.each};var po=function(t,n){var e,r,i,o,a=vi("beforesend","progress","load","error"),u=lo(),s=new XMLHttpRequest,c=null,h=null,l=0;function f(t){var n,r=s.status;if(!r&&function(t){var n=t.responseType;return n&&"text"!==n?t.response:t.responseText}(s)||r>=200&&r<300||304===r){if(i)try{n=i.call(e,s)}catch(t){return void a.call("error",e,t)}else n=s;a.call("load",e,n)}else a.call("error",e,t)}if("undefined"==typeof XDomainRequest||"withCredentials"in s||!/^(http(s)?:)?\/\//.test(t)||(s=new XDomainRequest),"onload"in s?s.onload=s.onerror=s.ontimeout=f:s.onreadystatechange=function(t){s.readyState>3&&f(t)},s.onprogress=function(t){a.call("progress",e,t)},e={header:function(t,n){return t=(t+"").toLowerCase(),arguments.length<2?u.get(t):(null==n?u.remove(t):u.set(t,n+""),e)},mimeType:function(t){return arguments.length?(r=null==t?null:t+"",e):r},responseType:function(t){return arguments.length?(o=t,e):o},timeout:function(t){return arguments.length?(l=+t,e):l},user:function(t){return arguments.length<1?c:(c=null==t?null:t+"",e)},password:function(t){return arguments.length<1?h:(h=null==t?null:t+"",e)},response:function(t){return i=t,e},get:function(t,n){return e.send("GET",t,n)},post:function(t,n){return e.send("POST",t,n)},send:function(n,i,f){return s.open(n,t,!0,c,h),null==r||u.has("accept")||u.set("accept",r+",*/*"),s.setRequestHeader&&u.each(function(t,n){s.setRequestHeader(n,t)}),null!=r&&s.overrideMimeType&&s.overrideMimeType(r),null!=o&&(s.responseType=o),l>0&&(s.timeout=l),null==f&&"function"==typeof i&&(f=i,i=null),null!=f&&1===f.length&&(f=function(t){return function(n,e){t(null==n?e:null)}}(f)),null!=f&&e.on("error",f).on("load",function(t){f(null,t)}),a.call("beforesend",e,s),s.send(null==i?null:i),e},abort:function(){return s.abort(),e},on:function(){var t=a.on.apply(a,arguments);return t===a?e:t}},null!=n){if("function"!=typeof n)throw new Error("invalid callback: "+n);return e.get(n)}return e},xo=function(t,n){return function(e,r){var i=po(e).mimeType(t).response(n);if(null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return i.get(r)}return i}},vo=(xo("text/html",function(t){return document.createRange().createContextualFragment(t.responseText)}),xo("application/json",function(t){return JSON.parse(t.responseText)})),go=(xo("text/plain",function(t){return t.responseText}),xo("application/xml",function(t){var n=t.responseXML;if(!n)throw new Error("parse error");return n}),{}),_o={},mo=34,wo=10,bo=13;function Mo(t){return new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}")}var zo=function(t){var n=new RegExp('["'+t+"\n\r]"),e=t.charCodeAt(0);function r(t,n){var r,i=[],o=t.length,a=0,u=0,s=o<=0,c=!1;function h(){if(s)return _o;if(c)return c=!1,go;var n,r,i=a;if(t.charCodeAt(i)===mo){for(;a++<o&&t.charCodeAt(a)!==mo||t.charCodeAt(++a)===mo;);return(n=a)>=o?s=!0:(r=t.charCodeAt(a++))===wo?c=!0:r===bo&&(c=!0,t.charCodeAt(a)===wo&&++a),t.slice(i+1,n-1).replace(/""/g,'"')}for(;a<o;){if((r=t.charCodeAt(n=a++))===wo)c=!0;else if(r===bo)c=!0,t.charCodeAt(a)===wo&&++a;else if(r!==e)continue;return t.slice(i,n)}return s=!0,t.slice(i,o)}for(t.charCodeAt(o-1)===wo&&--o,t.charCodeAt(o-1)===bo&&--o;(r=h())!==_o;){for(var l=[];r!==go&&r!==_o;)l.push(r),r=h();n&&null==(l=n(l,u++))||i.push(l)}return i}function i(n){return n.map(o).join(t)}function o(t){return null==t?"":n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,n){var e,i,o=r(t,function(t,r){if(e)return e(t,r-1);i=t,e=n?function(t,n){var e=Mo(t);return function(r,i){return n(e(r),i,t)}}(t,n):Mo(t)});return o.columns=i||[],o},parseRows:r,format:function(n,e){return null==e&&(e=function(t){var n=Object.create(null),e=[];return t.forEach(function(t){for(var r in t)r in n||e.push(n[r]=r)}),e}(n)),[e.map(o).join(t)].concat(n.map(function(n){return e.map(function(t){return o(n[t])}).join(t)})).join("\n")},formatRows:function(t){return t.map(i).join("\n")}}},No=zo(","),ko=No.parse,So=(No.parseRows,No.format,No.formatRows,zo("\t")),Ao=So.parse,To=(So.parseRows,So.format,So.formatRows,function(t,n){return function(e,r,i){arguments.length<3&&(i=r,r=null);var o=po(e).mimeType(t);return o.row=function(t){return arguments.length?o.response(function(t,n){return function(e){return t(e.responseText,n)}}(n,r=t)):r},o.row(r),i?o.get(i):o}});To("text/csv",ko),To("text/tab-separated-values",Ao);var Po=e(2),Co=e.n(Po),Eo=function(t,n,e){var r={text:t.word||t.name.replace('"%w"',e),freq:t.freq||t.count,score:t.score,id:t.id||t.seek};return n&&(r.category=n),r},Io=function(t,n){var e=t.name||t.word;return{name:e,text:n?"".concat(e," (").concat(n,")"):e,score:t.score,freq:t.freq||0}},qo=function(t){return void 0!==t.find(function(t){return t.Clust})?t.map(function(t){var n=Io(t),e=t.Clust?t.Clust.map(function(t){return Eo(t,n)}):[],r=Eo(t,n);return r.mainInCluster=!0,e.push(r),e}):[t.map(function(t){return Eo(t)})]},Ro=function(t,n){var e;return void 0!==t.find(function(t){return t.Words.find(function(t){return t.Clust})})?(e=[],t.forEach(function(t){t.Words.forEach(function(r){var i=Io(t,r.word),o=r.Clust?r.Clust.map(function(t){return Eo(t,i,n)}):[],a=Eo(r,i,n);a.mainInCluster=!0,o.push(a),e.push(o)})})):e=t.map(function(t){var e=Io(t);return t.Words.map(function(t){return Eo(t,e,n)})}),e},Do=function(t,n){var e=[];return t.forEach(function(t){var n={};n.info={name:t.table.Header[0],words:[{freq:t.table.Header[1],score:parseFloat(t.table.Header[3])},{freq:t.table.Header[2],score:parseFloat(t.table.Header[4])}]},n.words=t.table.Rows.map(function(t){return e="--"===(n=t).rnk1str?0:parseFloat(n.rnk1str),r="--"===n.rnk2str?0:parseFloat(n.rnk2str),{text:n.word,score:e-r,words:[{score:e,freq:n.cnt1,id:n.seek1},{score:r,freq:n.cnt2,id:n.seek2}]};var n,e,r}),e.push(n)}),e},Lo=function(t,n){var e={THES:{func:qo,words:t.Words,mainWord:{id:Co()(),text:t.lemma,freq:t.freq}},SKETCH:{func:Ro,words:t.Gramrels,mainWord:{id:Co()(),text:t.lemma,freq:t.freq}},WS_DIFF:{func:Do,words:t.content?t.content.common:void 0,mainWords:[{id:Co()(),text:t.lbl1,freq:t.frq1},{id:Co()(),text:t.lbl2,freq:t.frq2}]}},r={},i=e[n].mainWord?"mainWord":"mainWords";return r.words=e[n].func(e[n].words,e[n][i].text),r[i]=e[n][i],r},Uo=function(t,n){return new Promise(function(e,r){vo(t,function(t,i){return t?r(t):e(Lo(i,n))})})},Oo=function(t,n,e){var r=[];return t.words.forEach(function(t){t.forEach(function(t){return r.push(t[n])})}),e&&r.push(t.mainWord[n]),r},Wo=function(t){return[].concat.apply([],t)},jo=Math.PI,Fo=2*jo,Bo=Fo-1e-6;function Xo(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Yo(){return new Xo}Xo.prototype=Yo.prototype={constructor:Xo,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,o){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var o=this._x1,a=this._y1,u=e-t,s=r-n,c=o-t,h=a-n,l=c*c+h*h;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(l>1e-6)if(Math.abs(h*u-s*c)>1e-6&&i){var f=e-o,y=r-a,p=u*u+s*s,d=f*f+y*y,x=Math.sqrt(p),v=Math.sqrt(l),g=i*Math.tan((jo-Math.acos((p+l-d)/(2*x*v)))/2),_=g/v,m=g/x;Math.abs(_-1)>1e-6&&(this._+="L"+(t+_*c)+","+(n+_*h)),this._+="A"+i+","+i+",0,0,"+ +(h*f>c*y)+","+(this._x1=t+m*u)+","+(this._y1=n+m*s)}else this._+="L"+(this._x1=t)+","+(this._y1=n)},arc:function(t,n,e,r,i,o){t=+t,n=+n;var a=(e=+e)*Math.cos(r),u=e*Math.sin(r),s=t+a,c=n+u,h=1^o,l=o?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+s+","+c:(Math.abs(this._x1-s)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+s+","+c),e&&(l<0&&(l=l%Fo+Fo),l>Bo?this._+="A"+e+","+e+",0,1,"+h+","+(t-a)+","+(n-u)+"A"+e+","+e+",0,1,"+h+","+(this._x1=s)+","+(this._y1=c):l>1e-6&&(this._+="A"+e+","+e+",0,"+ +(l>=jo)+","+h+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};var Ho=Yo,Vo=function(t){return function(){return t}},$o=Math.abs,Zo=Math.atan2,Qo=Math.cos,Go=Math.max,Jo=Math.min,Ko=Math.sin,ta=Math.sqrt,na=1e-12,ea=Math.PI,ra=ea/2,ia=2*ea;function oa(t){return t>=1?ra:t<=-1?-ra:Math.asin(t)}function aa(t){return t.innerRadius}function ua(t){return t.outerRadius}function sa(t){return t.startAngle}function ca(t){return t.endAngle}function ha(t){return t&&t.padAngle}function la(t,n,e,r,i,o,a){var u=t-e,s=n-r,c=(a?o:-o)/ta(u*u+s*s),h=c*s,l=-c*u,f=t+h,y=n+l,p=e+h,d=r+l,x=(f+p)/2,v=(y+d)/2,g=p-f,_=d-y,m=g*g+_*_,w=i-o,b=f*d-p*y,M=(_<0?-1:1)*ta(Go(0,w*w*m-b*b)),z=(b*_-g*M)/m,N=(-b*g-_*M)/m,k=(b*_+g*M)/m,S=(-b*g+_*M)/m,A=z-x,T=N-v,P=k-x,C=S-v;return A*A+T*T>P*P+C*C&&(z=k,N=S),{cx:z,cy:N,x01:-h,y01:-l,x11:z*(i/w-1),y11:N*(i/w-1)}}var fa=function(){var t=aa,n=ua,e=Vo(0),r=null,i=sa,o=ca,a=ha,u=null;function s(){var s,c,h,l=+t.apply(this,arguments),f=+n.apply(this,arguments),y=i.apply(this,arguments)-ra,p=o.apply(this,arguments)-ra,d=$o(p-y),x=p>y;if(u||(u=s=Ho()),f<l&&(c=f,f=l,l=c),f>na)if(d>ia-na)u.moveTo(f*Qo(y),f*Ko(y)),u.arc(0,0,f,y,p,!x),l>na&&(u.moveTo(l*Qo(p),l*Ko(p)),u.arc(0,0,l,p,y,x));else{var v,g,_=y,m=p,w=y,b=p,M=d,z=d,N=a.apply(this,arguments)/2,k=N>na&&(r?+r.apply(this,arguments):ta(l*l+f*f)),S=Jo($o(f-l)/2,+e.apply(this,arguments)),A=S,T=S;if(k>na){var P=oa(k/l*Ko(N)),C=oa(k/f*Ko(N));(M-=2*P)>na?(w+=P*=x?1:-1,b-=P):(M=0,w=b=(y+p)/2),(z-=2*C)>na?(_+=C*=x?1:-1,m-=C):(z=0,_=m=(y+p)/2)}var E=f*Qo(_),I=f*Ko(_),q=l*Qo(b),R=l*Ko(b);if(S>na){var D,L=f*Qo(m),U=f*Ko(m),O=l*Qo(w),W=l*Ko(w);if(d<ea&&(D=function(t,n,e,r,i,o,a,u){var s=O-E,c=W-I,h=q-L,l=R-U,f=l*s-h*c;if(!(f*f<na))return[E+(f=(h*(I-U)-l*(E-L))/f)*s,I+f*c]}())){var j=E-D[0],F=I-D[1],B=L-D[0],X=U-D[1],Y=1/Ko(((h=(j*B+F*X)/(ta(j*j+F*F)*ta(B*B+X*X)))>1?0:h<-1?ea:Math.acos(h))/2),H=ta(D[0]*D[0]+D[1]*D[1]);A=Jo(S,(l-H)/(Y-1)),T=Jo(S,(f-H)/(Y+1))}}z>na?T>na?(v=la(O,W,E,I,f,T,x),g=la(L,U,q,R,f,T,x),u.moveTo(v.cx+v.x01,v.cy+v.y01),T<S?u.arc(v.cx,v.cy,T,Zo(v.y01,v.x01),Zo(g.y01,g.x01),!x):(u.arc(v.cx,v.cy,T,Zo(v.y01,v.x01),Zo(v.y11,v.x11),!x),u.arc(0,0,f,Zo(v.cy+v.y11,v.cx+v.x11),Zo(g.cy+g.y11,g.cx+g.x11),!x),u.arc(g.cx,g.cy,T,Zo(g.y11,g.x11),Zo(g.y01,g.x01),!x))):(u.moveTo(E,I),u.arc(0,0,f,_,m,!x)):u.moveTo(E,I),l>na&&M>na?A>na?(v=la(q,R,L,U,l,-A,x),g=la(E,I,O,W,l,-A,x),u.lineTo(v.cx+v.x01,v.cy+v.y01),A<S?u.arc(v.cx,v.cy,A,Zo(v.y01,v.x01),Zo(g.y01,g.x01),!x):(u.arc(v.cx,v.cy,A,Zo(v.y01,v.x01),Zo(v.y11,v.x11),!x),u.arc(0,0,l,Zo(v.cy+v.y11,v.cx+v.x11),Zo(g.cy+g.y11,g.cx+g.x11),x),u.arc(g.cx,g.cy,A,Zo(g.y11,g.x11),Zo(g.y01,g.x01),!x))):u.arc(0,0,l,b,w,x):u.lineTo(q,R)}else u.moveTo(0,0);if(u.closePath(),s)return u=null,s+""||null}return s.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-ea/2;return[Qo(r)*e,Ko(r)*e]},s.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:Vo(+n),s):t},s.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Vo(+t),s):n},s.cornerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Vo(+t),s):e},s.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Vo(+t),s):r},s.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Vo(+t),s):i},s.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:Vo(+t),s):o},s.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:Vo(+t),s):a},s.context=function(t){return arguments.length?(u=null==t?null:t,s):u},s};function ya(t){this._context=t}ya.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};var pa=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN},da=function(t){return t},xa=function(){var t=da,n=pa,e=null,r=Vo(0),i=Vo(ia),o=Vo(0);function a(a){var u,s,c,h,l,f=a.length,y=0,p=new Array(f),d=new Array(f),x=+r.apply(this,arguments),v=Math.min(ia,Math.max(-ia,i.apply(this,arguments)-x)),g=Math.min(Math.abs(v)/f,o.apply(this,arguments)),_=g*(v<0?-1:1);for(u=0;u<f;++u)(l=d[p[u]=u]=+t(a[u],u,a))>0&&(y+=l);for(null!=n?p.sort(function(t,e){return n(d[t],d[e])}):null!=e&&p.sort(function(t,n){return e(a[t],a[n])}),u=0,c=y?(v-f*_)/y:0;u<f;++u,x=h)s=p[u],h=x+((l=d[s])>0?l*c:0)+_,d[s]={data:a[s],index:u,value:l,startAngle:x,endAngle:h,padAngle:g};return d}return a.value=function(n){return arguments.length?(t="function"==typeof n?n:Vo(+n),a):t},a.sortValues=function(t){return arguments.length?(n=t,e=null,a):n},a.sort=function(t){return arguments.length?(e=t,n=null,a):e},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Vo(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:Vo(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:Vo(+t),a):o},a};function va(t){this._curve=t}!function(t){function n(n){return new va(t(n))}n._curve=t}(function(t){return new ya(t)}),va.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}},Array.prototype.slice,Math.sqrt(1/3);Math.sin(ea/10),Math.sin(7*ea/10);var ga=(Math.sin(ia/10),Math.cos(ia/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12),function(){});function _a(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function ma(t){this._context=t}function wa(t,n){this._basis=new ma(t),this._beta=n}function ba(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function Ma(t,n){this._context=t,this._k=(1-n)/6}function za(t,n){this._context=t,this._k=(1-n)/6}function Na(t,n){this._context=t,this._k=(1-n)/6}function ka(t,n,e){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>na){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,s=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/s,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/s}if(t._l23_a>na){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-n*t._l12_2a)/h,a=(a*c+t._y1*t._l23_2a-e*t._l12_2a)/h}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function Sa(t,n){this._context=t,this._alpha=n}function Aa(t,n){this._context=t,this._alpha=n}function Ta(t,n){this._context=t,this._alpha=n}function Pa(t){return t<0?-1:1}function Ca(t,n,e){var r=t._x1-t._x0,i=n-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(e-t._y1)/(i||r<0&&-0),u=(o*i+a*r)/(r+i);return(Pa(o)+Pa(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(u))||0}function Ea(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function Ia(t,n,e){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,u=(o-r)/3;t._context.bezierCurveTo(r+u,i+u*n,o-u,a-u*e,o,a)}function qa(t){this._context=t}function Ra(t){this._context=t}function Da(t,n,e){var r=e.length>1?(e[1].value-e[0].value)/2:0,i=t.score<=n.value-r&&t.score>n.value+r;return n.value===e[e.length-1].value&&(i=i||t.score<n.value),n.value===e[0].value&&(i=i||t.score>n.value),i}function La(t,n,e){var r;if(r="string"==typeof e.category.color?e.category.color:e.category.color[n],e.category.show&&e.category.items){var i=e.category.items.find(function(n){return n.name===t.data[0].category.name});r=i&&i.hasOwnProperty("color")?i.color:r}return r}function Ua(t,n,e){return n.circle.categoryColor?La(t.category,t.category.index,n):e.scoreColor(t.score)}function Oa(t,n,e){return n.circle.categoryColor?e.scoreOpacity(t.score):1}function Wa(t,n,e){var r;if(n.circle.categoryColor)r=Ua(t,n,e);else{var i=t.score||e.scoreRadius.domain()[1];r=g(e.scoreColor(i)).darker(.6)}return r}function ja(t,n,e,r,i){e.updateShape(t,{"text-decoration":"underline"});var o=Wa(n,r,i),a=r.circle.strokeWidth;e.updateShape("#word__circle-".concat(n.id),{stroke:o,strokeWidth:a},!1),"function"==typeof r.text.mouseover&&r.text.mouseover(n)}function Fa(t,n,e,r){e.updateShape(t,{"text-decoration":"none"}),e.updateShape("#word__circle-".concat(n.id),{stroke:"rgb(0, 0, 0, 0)",strokeWidth:0},!1),"function"==typeof r.text.mouseout&&r.text.mouseout(n)}function Ba(t,n){"function"==typeof n.text.mouseclick&&n.text.mouseclick(t)}function Xa(t,n,e,r,i){e.updateShape(".word__circles",{fill:function(t){return i.scoreColor(t.score)}},!1);var o=Wa(n,r,i),a=r.circle.strokeWidth;e.updateShape(t,{stroke:o,strokeWidth:a},!1),"function"==typeof r.circle.mouseover&&r.circle.mouseover(n)}function Ya(t,n,e,r){e.updateShape(t,{stroke:"rgb(0, 0, 0, 0)",strokeWidth:0},!1),"function"==typeof r.circle.mouseout&&r.circle.mouseout(n)}function Ha(t,n){"function"==typeof n.circle.mouseclick&&n.circle.mouseclick(t)}function Va(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,o,a,u,s,c,h,l,f,y=t._root,p={data:r},d=t._x0,x=t._y0,v=t._x1,g=t._y1;if(!y)return t._root=p,t;for(;y.length;)if((c=n>=(o=(d+v)/2))?d=o:v=o,(h=e>=(a=(x+g)/2))?x=a:g=a,i=y,!(y=y[l=h<<1|c]))return i[l]=p,t;if(u=+t._x.call(null,y.data),s=+t._y.call(null,y.data),n===u&&e===s)return p.next=y,i?i[l]=p:t._root=p,t;do{i=i?i[l]=new Array(4):t._root=new Array(4),(c=n>=(o=(d+v)/2))?d=o:v=o,(h=e>=(a=(x+g)/2))?x=a:g=a}while((l=h<<1|c)==(f=(s>=a)<<1|u>=o));return i[f]=y,i[l]=p,t}ma.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_a(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_a(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},wa.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var r,i=t[0],o=n[0],a=t[e]-i,u=n[e]-o,s=-1;++s<=e;)r=s/e,this._basis.point(this._beta*t[s]+(1-this._beta)*(i+r*a),this._beta*n[s]+(1-this._beta)*(o+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}},function t(n){function e(t){return 1===n?new ma(t):new wa(t,n)}return e.beta=function(n){return t(+n)},e}(.85),Ma.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ba(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:ba(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}},function t(n){function e(t){return new Ma(t,n)}return e.tension=function(n){return t(+n)},e}(0),za.prototype={areaStart:ga,areaEnd:ga,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:ba(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}},function t(n){function e(t){return new za(t,n)}return e.tension=function(n){return t(+n)},e}(0),Na.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ba(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}},function t(n){function e(t){return new Na(t,n)}return e.tension=function(n){return t(+n)},e}(0),Sa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:ka(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}},function t(n){function e(t){return n?new Sa(t,n):new Ma(t,0)}return e.alpha=function(n){return t(+n)},e}(.5),Aa.prototype={areaStart:ga,areaEnd:ga,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:ka(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}},function t(n){function e(t){return n?new Aa(t,n):new za(t,0)}return e.alpha=function(n){return t(+n)},e}(.5),Ta.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ka(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}},function t(n){function e(t){return n?new Ta(t,n):new Na(t,0)}return e.alpha=function(n){return t(+n)},e}(.5),qa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ia(this,this._t0,Ea(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(n=+n,(t=+t)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,Ia(this,Ea(this,e=Ca(this,t,n)),e);break;default:Ia(this,this._t0,e=Ca(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(function(t){this._context=new Ra(t)}.prototype=Object.create(qa.prototype)).point=function(t,n){qa.prototype.point.call(this,n,t)},Ra.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,o){this._context.bezierCurveTo(n,t,r,e,o,i)}};var $a=function(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i};function Za(t){return t[0]}function Qa(t){return t[1]}function Ga(t,n,e){var r=new Ja(null==n?Za:n,null==e?Qa:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Ja(t,n,e,r,i,o){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Ka(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var tu=Ga.prototype=Ja.prototype;tu.copy=function(){var t,n,e=new Ja(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=Ka(r),e;for(t=[{source:r,target:e._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?t.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=Ka(n));return e},tu.add=function(t){var n=+this._x.call(null,t),e=+this._y.call(null,t);return Va(this.cover(n,e),n,e,t)},tu.addAll=function(t){var n,e,r,i,o=t.length,a=new Array(o),u=new Array(o),s=1/0,c=1/0,h=-1/0,l=-1/0;for(e=0;e<o;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(i=+this._y.call(null,n))||(a[e]=r,u[e]=i,r<s&&(s=r),r>h&&(h=r),i<c&&(c=i),i>l&&(l=i));if(s>h||c>l)return this;for(this.cover(s,c).cover(h,l),e=0;e<o;++e)Va(this,a[e],u[e],t[e]);return this},tu.cover=function(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,o=(r=Math.floor(n))+1;else{for(var a,u,s=i-e,c=this._root;e>t||t>=i||r>n||n>=o;)switch(u=(n<r)<<1|t<e,(a=new Array(4))[u]=c,c=a,s*=2,u){case 0:i=e+s,o=r+s;break;case 1:e=i-s,o=r+s;break;case 2:i=e+s,r=o-s;break;case 3:e=i-s,r=o-s}this._root&&this._root.length&&(this._root=c)}return this._x0=e,this._y0=r,this._x1=i,this._y1=o,this},tu.data=function(){var t=[];return this.visit(function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)}),t},tu.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},tu.find=function(t,n,e){var r,i,o,a,u,s,c,h=this._x0,l=this._y0,f=this._x1,y=this._y1,p=[],d=this._root;for(d&&p.push(new $a(d,h,l,f,y)),null==e?e=1/0:(h=t-e,l=n-e,f=t+e,y=n+e,e*=e);s=p.pop();)if(!(!(d=s.node)||(i=s.x0)>f||(o=s.y0)>y||(a=s.x1)<h||(u=s.y1)<l))if(d.length){var x=(i+a)/2,v=(o+u)/2;p.push(new $a(d[3],x,v,a,u),new $a(d[2],i,v,x,u),new $a(d[1],x,o,a,v),new $a(d[0],i,o,x,v)),(c=(n>=v)<<1|t>=x)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=s)}else{var g=t-+this._x.call(null,d.data),_=n-+this._y.call(null,d.data),m=g*g+_*_;if(m<e){var w=Math.sqrt(e=m);h=t-w,l=n-w,f=t+w,y=n+w,r=d.data}}return r},tu.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var n,e,r,i,o,a,u,s,c,h,l,f,y=this._root,p=this._x0,d=this._y0,x=this._x1,v=this._y1;if(!y)return this;if(y.length)for(;;){if((c=o>=(u=(p+x)/2))?p=u:x=u,(h=a>=(s=(d+v)/2))?d=s:v=s,n=y,!(y=y[l=h<<1|c]))return this;if(!y.length)break;(n[l+1&3]||n[l+2&3]||n[l+3&3])&&(e=n,f=l)}for(;y.data!==t;)if(r=y,!(y=y.next))return this;return(i=y.next)&&delete y.next,r?(i?r.next=i:delete r.next,this):n?(i?n[l]=i:delete n[l],(y=n[0]||n[1]||n[2]||n[3])&&y===(n[3]||n[2]||n[1]||n[0])&&!y.length&&(e?e[f]=y:this._root=y),this):(this._root=i,this)},tu.removeAll=function(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this},tu.root=function(){return this._root},tu.size=function(){var t=0;return this.visit(function(n){if(!n.length)do{++t}while(n=n.next)}),t},tu.visit=function(t){var n,e,r,i,o,a,u=[],s=this._root;for(s&&u.push(new $a(s,this._x0,this._y0,this._x1,this._y1));n=u.pop();)if(!t(s=n.node,r=n.x0,i=n.y0,o=n.x1,a=n.y1)&&s.length){var c=(r+o)/2,h=(i+a)/2;(e=s[3])&&u.push(new $a(e,c,h,o,a)),(e=s[2])&&u.push(new $a(e,r,h,c,a)),(e=s[1])&&u.push(new $a(e,c,i,o,h)),(e=s[0])&&u.push(new $a(e,r,i,c,h))}return this},tu.visitAfter=function(t){var n,e=[],r=[];for(this._root&&e.push(new $a(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var o,a=n.x0,u=n.y0,s=n.x1,c=n.y1,h=(a+s)/2,l=(u+c)/2;(o=i[0])&&e.push(new $a(o,a,u,h,l)),(o=i[1])&&e.push(new $a(o,h,u,s,l)),(o=i[2])&&e.push(new $a(o,a,l,h,c)),(o=i[3])&&e.push(new $a(o,h,l,s,c))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},tu.x=function(t){return arguments.length?(this._x=t,this):this._x},tu.y=function(t){return arguments.length?(this._y=t,this):this._y};var nu=function(t){return function(){return t}},eu=function(){return 1e-6*(Math.random()-.5)};function ru(t){return t.x}function iu(t){return t.y}var ou=10,au=Math.PI*(3-Math.sqrt(5)),uu=function(t){var n,e=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,u=new Map,s=Pi(h),c=vi("tick","end");function h(){l(),c.call("tick",n),e<r&&(s.stop(),c.call("end",n))}function l(r){var s,c,h=t.length;void 0===r&&(r=1);for(var l=0;l<r;++l)for(e+=(o-e)*i,u.forEach(function(t){t(e)}),s=0;s<h;++s)null==(c=t[s]).fx?c.x+=c.vx*=a:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=a:(c.y=c.fy,c.vy=0);return n}function f(){for(var n,e=0,r=t.length;e<r;++e){if((n=t[e]).index=e,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),isNaN(n.x)||isNaN(n.y)){var i=ou*Math.sqrt(e),o=e*au;n.x=i*Math.cos(o),n.y=i*Math.sin(o)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function y(n){return n.initialize&&n.initialize(t),n}return null==t&&(t=[]),f(),n={tick:l,restart:function(){return s.restart(h),n},stop:function(){return s.stop(),n},nodes:function(e){return arguments.length?(t=e,f(),u.forEach(y),n):t},alpha:function(t){return arguments.length?(e=+t,n):e},alphaMin:function(t){return arguments.length?(r=+t,n):r},alphaDecay:function(t){return arguments.length?(i=+t,n):+i},alphaTarget:function(t){return arguments.length?(o=+t,n):o},velocityDecay:function(t){return arguments.length?(a=1-t,n):1-a},force:function(t,e){return arguments.length>1?(null==e?u.delete(t):u.set(t,y(e)),n):u.get(t)},find:function(n,e,r){var i,o,a,u,s,c=0,h=t.length;for(null==r?r=1/0:r*=r,c=0;c<h;++c)(a=(i=n-(u=t[c]).x)*i+(o=e-u.y)*o)<r&&(s=u,r=a);return s},on:function(t,e){return arguments.length>1?(c.on(t,e),n):c.on(t)}}},su=function(){var t,n,e,r,i=nu(-30),o=1,a=1/0,u=.81;function s(r){var i,o=t.length,a=Ga(t,ru,iu).visitAfter(h);for(e=r,i=0;i<o;++i)n=t[i],a.visit(l)}function c(){if(t){var n,e,o=t.length;for(r=new Array(o),n=0;n<o;++n)e=t[n],r[e.index]=+i(e,n,t)}}function h(t){var n,e,i,o,a,u=0,s=0;if(t.length){for(i=o=a=0;a<4;++a)(n=t[a])&&(e=Math.abs(n.value))&&(u+=n.value,s+=e,i+=e*n.x,o+=e*n.y);t.x=i/s,t.y=o/s}else{(n=t).x=n.data.x,n.y=n.data.y;do{u+=r[n.data.index]}while(n=n.next)}t.value=u}function l(t,i,s,c){if(!t.value)return!0;var h=t.x-n.x,l=t.y-n.y,f=c-i,y=h*h+l*l;if(f*f/u<y)return y<a&&(0===h&&(y+=(h=eu())*h),0===l&&(y+=(l=eu())*l),y<o&&(y=Math.sqrt(o*y)),n.vx+=h*t.value*e/y,n.vy+=l*t.value*e/y),!0;if(!(t.length||y>=a)){(t.data!==n||t.next)&&(0===h&&(y+=(h=eu())*h),0===l&&(y+=(l=eu())*l),y<o&&(y=Math.sqrt(o*y)));do{t.data!==n&&(f=r[t.data.index]*e/y,n.vx+=h*f,n.vy+=l*f)}while(t=t.next)}}return s.initialize=function(n){t=n,c()},s.strength=function(t){return arguments.length?(i="function"==typeof t?t:nu(+t),c(),s):i},s.distanceMin=function(t){return arguments.length?(o=t*t,s):Math.sqrt(o)},s.distanceMax=function(t){return arguments.length?(a=t*t,s):Math.sqrt(a)},s.theta=function(t){return arguments.length?(u=t*t,s):Math.sqrt(u)},s},cu=function(t,n,e){var r,i,o,a=nu(.1);function u(t){for(var a=0,u=r.length;a<u;++a){var s=r[a],c=s.x-n||1e-6,h=s.y-e||1e-6,l=Math.sqrt(c*c+h*h),f=(o[a]-l)*i[a]*t/l;s.vx+=c*f,s.vy+=h*f}}function s(){if(r){var n,e=r.length;for(i=new Array(e),o=new Array(e),n=0;n<e;++n)o[n]=+t(r[n],n,r),i[n]=isNaN(o[n])?0:+a(r[n],n,r)}}return"function"!=typeof t&&(t=nu(+t)),null==n&&(n=0),null==e&&(e=0),u.initialize=function(t){r=t,s()},u.strength=function(t){return arguments.length?(a="function"==typeof t?t:nu(+t),s(),u):a},u.radius=function(n){return arguments.length?(t="function"==typeof n?n:nu(+n),s(),u):t},u.x=function(t){return arguments.length?(n=+t,u):n},u.y=function(t){return arguments.length?(e=+t,u):e},u},hu={viz:{divId:"vis-container",svgId:"ske-viz-radial",className:"viz-radial",width:600,height:600,margin:{top:50,right:50,bottom:50,left:50},animation:!0,maxItems:void 0},tick:{show:!0,scoreColor:!1,color:"rgb(230, 230, 230)",opacity:.3,size:8,number:3},text:{show:!0,scale:!0,color:"black",size:[15,30],font:"Helvetica, Arial, sans-serif",mouseover:void 0,mouseout:void 0,mouseclick:void 0},circle:{show:!0,scale:!0,categoryColor:!1,color:["rgb(200, 20, 200)","rgb(50, 200, 200)"],size:[5,40],strokeWidth:5,includeMainWord:!0,spaceAroundCentre:50,mouseover:void 0,mouseout:void 0,mouseclick:void 0},score:{showNumbers:!1,showText:["← more similar to %w"]},category:{show:!1,differentAngles:!1,items:void 0,showItems:void 0,color:"rgba(250, 250, 250, 0.7)",fillOpacity:.3,strokeWidth:8,showLabel:!0,labelSize:18,labelPadding:75}},lu=e(0),fu=function(t,n){var e,r,i,o,a;function u(t){for(var n,o,u,c=0;c<e.length;c++){n=e[c],r[c],a[c],u=i[c];for(var h=c+1;h<e.length;h++)o=e[h],r[h],a[h],s(n,o,u,i[h],t)}}function s(t,n,e,r,i){var o=lu.Shapes.ellipse(t.x,t.y,e[0],e[1]),a=lu.Shapes.ellipse(n.x,n.y,r[0],r[1]),u=c(o,a);if(!u)return!1;var s={x:0,y:0};if(o.args[0].x===a.args[0].x&&o.args[0].y===a.args[0].y)s={x:1,y:0};else{var h=Math.sqrt((o.args[0].x-a.args[0].x)*(o.args[0].x-a.args[0].x)+(o.args[0].y-a.args[0].y)*(o.args[0].y-a.args[0].y));s.x=(o.args[0].x-a.args[0].x)/h,s.y=(o.args[0].y-a.args[0].y)/h}for(var l=10;u;)u=c(o=lu.Shapes.ellipse(o.args[0].x+s.x*l,o.args[0].y+s.y*l,o.args[1],o.args[2]),a=lu.Shapes.ellipse(a.args[0].x-s.x*l,a.args[0].y-s.y*l,a.args[1],a.args[2]));for(o=lu.Shapes.ellipse(o.args[0].x-s.x*l,o.args[0].y-s.y*l,o.args[1],o.args[2]),a=lu.Shapes.ellipse(a.args[0].x+s.x*l,a.args[0].y+s.y*l,a.args[1],a.args[2]),u=!0,l=1;u;)u=c(o=lu.Shapes.ellipse(o.args[0].x+s.x*l,o.args[0].y+s.y*l,o.args[1],o.args[2]),a=lu.Shapes.ellipse(a.args[0].x-s.x*l,a.args[0].y-s.y*l,a.args[1],a.args[2]));return t.x=o.args[0].x,t.y=o.args[0].y,n.x=a.args[0].x,n.y=a.args[0].y,!0}function c(t,n){if("Intersection"===lu.Intersection.intersect(t,n).status)return!0;var e=lu.Shapes.rectangle(t.args[0].x-t.args[1],t.args[0].y-t.args[2],2*t.args[1],2*t.args[2]),r=lu.Shapes.rectangle(n.args[0].x-n.args[1],n.args[0].y-n.args[2],2*n.args[1],2*n.args[2]);return!(!h(t.args[0],r)&&!h(n.args[0],e))}function h(t,n){return Math.sign(n.args[0].x-t.x)!==Math.sign(n.args[1].x-t.x)&&Math.sign(n.args[0].y-t.y)!==Math.sign(n.args[1].y-t.y)}function l(){if(e){a=new Array(e.length);for(var u=0;u<e.length;u++)a[u]=o(e[u],u,e);r=new Array(e.length);for(var s=0;s<e.length;s++)r[s]=n(e[s],s,e);i=new Array(e.length);for(var c=0;c<e.length;c++)i[c]=t(e[c],c,e)}}return u.initialize=function(t){e=t,l()},u.strength=function(t){return null==t?o:(o="function"==typeof t?t:function(){return+t},l(),u)},u.distance=function(t){return null==t?n:(n="function"==typeof t?t:function(){return+t},l(),u)},u.radius=function(n){return null==n?t:(t="function"==typeof n?n:function(){return n},l(),u)},o||u.strength(.1),n||u.distance(0),t||u.radius([30,40]),u};var yu=function(t,n){var e,r,i,o,a,u={scoreRadius:void 0,scoreColor:void 0,scoreOpacity:void 0,freqRadius:void 0,fontSize:void 0},s={circles:void 0,texts:void 0};function c(t,n){var e=n.append("text").attr("font-size",u.fontSize(t.freq)).attr("font-family",i.text.font).text(t.text).node().getBBox();return{width:e.width,height:e.height}}function h(){var t,n;if(t=Wo(o.words).sort(function(t,n){return n.freq-t.freq}),s.circles=[],o.mainWord.x=0,o.mainWord.y=0,s.texts=[{x:o.mainWord.x,y:o.mainWord.y,text:o.mainWord.text,score:o.mainWord.score,id:o.mainWord.id}],t.forEach(function(t){var n;a&&(n=[t.category.startAngle,t.category.endAngle]);var e=u.scoreRadius(t.score),r=function(t,n){return dr(t,pn().domain([0,2*Math.PI]).range(n||[0,2*Math.PI])(Math.random()*Math.PI*2))}(e,n);t.x=r.x,t.y=r.y;var i=u.freqRadius(t.freq),o={class:"word_circle",x:t.x,y:t.y,r:i,rx:Math.max(t.size.width/1.8,1.2*i),ry:Math.max(t.size.height/1.8,1.2*i),wordRadial:e,text:t.text,id:t.id,freq:t.freq,score:t.score,fill:"rgba(50, 50, 50, 0.3)"},c={class:"word_text",x:t.x,y:t.y,wordRadial:e,width:t.size.width,height:t.size.height,text:t.text,score:t.score,fill:"rgba(50, 50, 50, 0.6)",id:t.id};s.circles.push(o),s.texts.push(c)}),!a){var e=o.mainWord,c={isMainWord:!0,x:e.x+i.viz.width/2,y:e.y+i.viz.height/2,fx:e.x,fy:e.y,rx:Math.max(e.size.width/1.5,u.freqRadius(e.freq)),ry:e.size.height/1.5,wordRadial:0,text:e.text,fill:"rgba(50, 50, 50, 0.3)"},h=[].concat(function(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(s.circles),[c]);console.log("",o.mainWord),uu(h).force("charge",su().strength(-20)).force("collide",fu().radius(function(t){return[t.rx,t.ry]})).force("r",cu(function(t){return t.wordRadial})).on("tick",function(){r.updateShape(".word__circle",{cx:function(t){return i.viz.width/2+t.x},cy:function(t){return i.viz.height/2+t.y}}),n.filter(function(t){return!t.isMainWord}).each(function(t){var n=i.viz.width/2+t.x,e=i.viz.height/2+t.y;ui("#word__circle-".concat(t.id)).attr("cx",n).attr("cy",e),ui("#word__text-".concat(t.id)).attr("x",n).attr("y",e)}),n.attr("cx",function(t,n){return i.viz.width/2+t.x}).attr("cy",function(t){return i.viz.height/2+t.y})}),n=ui("#".concat(i.viz.svgId)).selectAll(".word__circle_test").data(h).enter().append("ellipse").attr("fill",function(t){return t.fill}).attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("rx",function(t){return t.rx}).attr("ry",function(t){return t.ry}).attr("opacity",.5).attr("title",function(t){return t.text})}}function l(t){if(t&&(e=r.createSVG(i.viz,i.viz.svgId)),h(),a&&i.category.show){var n=("category__arc",c=u,l=r,f="rotate(90 ".concat((s=i).viz.width/2," ").concat(s.viz.height/2,")\n    translate(").concat(s.viz.width/2,", ").concat(s.viz.height/2,")"),y=function(t,n){return g(La(t,n,s)).darker(.07)},p=fa().outerRadius(s.viz.width/2+20).innerRadius(5),{shape:"path",class:"category__arc",enter:{d:function(t){return p(t)},stroke:function(t,n){return y(t,n)},strokeWidth:function(t){return 0},fill:function(t,n){return La(t,n,s)},fillOpacity:function(t){return 0},transform:function(){return f},transition:{delay:function(t,n){return 400*n},fillOpacity:function(t){return s.category.fillOpacity},strokeWidth:function(t){return s.category.strokeWidth}}},update:{d:function(t){return p(t)},stroke:function(t,n){return y(t,n)},fill:function(t,n){return La(t,n,s)},transform:function(){return f}},exit:{fill:function(t){return"transparent"}},mouseover:function(t){l.updateShape(".word__circle",{fill:function(n){return n.category.text===t.text?Ua(n,s,c):s.tick.color}},!0),l.updateShape(".word__text",{fill:function(n){return n.category.text===t.text?s.text.color:g(s.tick.color).darker(.5)}},!0),l.updateShape(".category__arc",{fill:"rgba(0, 0, 0, 0)",stroke:"rgba(0, 0, 0, 0)"},!0),l.updateShape(ui(this),{fill:function(n){return La(n,t.index,s)},stroke:function(n){return La(n,t.index,s)}},!0)},mouseout:function(t){l.updateShape(".category__arc",{fill:function(t,n){return La(t,n,s)},stroke:function(t,n){return y(t,n)}},!0),l.updateShape(".word__circle",{fill:function(t){return Ua(t,s,c)}},!0),l.updateShape(".word__text",{fill:function(t){return s.text.color}},!0)}});r.drawShape(a,n,t)}var s,c,l,f,y,p;if(a&&i.category.showLabel){var d=function(t,n,e,r){var i=function(t){return n.viz.width/2+t.x},o=function(t){return n.viz.height/2+t.y};return{shape:"text",class:"category__text",enter:{id:function(t){return t.id},x:function(t){return n.viz.width/2},y:function(t){return n.viz.height/2},fill:function(t){return g(n.tick.color).darker(.7)},fontSize:function(t){return n.category.labelSize},fontFamily:function(t){return n.text.font},fontWeight:function(t){return"bold"},textAnchor:function(t){return"middle"},alignmentBaseline:function(t){return"middle"},cursor:function(t){return"pointer"},opacity:function(t){return 0},text:function(t){return null},transition:{delay:800,opacity:function(t){return 1},x:function(t){return i(t)},y:function(t){return o(t)}}},update:{id:function(t){return t.id},fontSize:function(t){return n.category.labelSize},text:function(t){return t.text},x:function(t){return i(t)},y:function(t){return o(t)}},exit:{fontSize:function(t){return 0}}}}(0,i),x=a.map(function(t,n){var e=dr(u.scoreRadius.range()[0]+i.category.labelPadding,t.startAngle+(t.endAngle-t.startAngle)/2);return{id:"category__text-".concat(n),name:t.name,text:t.text,mainWord:o.mainWord.text,index:n,x:e.x,y:e.y}});r.drawShape(x,d,t),r.createTspanText(x,i)}if(i.tick.show){var v=u.scoreColor.ticks(i.tick.number);v.sort(function(t,n){return n-t}),i.tick.values=v.map(function(t){return{id:Co()(t),value:t}});var _=function(t,n,e,r){var i=function(t){return n.tick.scoreColor?e.scoreColor(t.value):n.tick.color};return{shape:"circle",class:"tick",enter:{id:function(t){return"tick-".concat(t.id)},cx:function(t){return n.viz.width/2},cy:function(t){return n.viz.height/2},r:function(t){return e.scoreRadius(t.value)},fill:function(t){return"none"},stroke:function(t){return"transparent"},strokeOpacity:function(t){return n.tick.opacity},strokeWidth:function(t){return n.tick.size},transition:{delay:function(t,n){return 200*n+900},stroke:function(t){return i(t)}}},update:{id:function(t){return"tick-".concat(t.id)},r:function(t){return e.scoreRadius(t.value)},stroke:function(t){return i(t)}},exit:{strokeOpacity:0},mouseover:function(t){r.updateShape(".tick",{strokeOpacity:Math.min(n.tick.opacity,.1)}),r.updateShape(ui(this),{strokeOpacity:Math.max(n.tick.opacity,.9)}),r.updateShape(".word__circle",{fill:function(r){return Da(r,t,n.tick.values)?r.category?La(r,r.category.index,n):e.scoreColor(r.score):n.tick.color}},!0),r.updateShape(".word__text",{fill:function(e){return Da(e,t,n.tick.values)?n.text.color:g(n.tick.color).darker(.5)}})},mouseout:function(t){r.updateShape(".tick",{strokeOpacity:n.tick.opacity}),r.updateShape(".word__circle",{fill:function(t){return t.category?La(t,t.category.index,n):e.scoreColor(t.score)}}),r.updateShape(".word__text",{fill:function(t){return n.text.color}})}}}(0,i,u,r);r.drawShape(i.tick.values,_,t)}var m=Wo(o.words).sort(function(t,n){return n.score-t.score});if(i.circle.show){var w=function(t,n,e,r){var i=n.viz.width/2,o=n.viz.height/2,a=e.scoreColor.range()[1],u=function(t){return n.circle.includeMainWord?e.freqRadius(t.freq):0};return{shape:"circle",class:"main-word__circle",enter:{id:function(t){return"word__circle-".concat(t.id)},cx:function(t){return i},cy:function(t){return o},r:function(t){return 0},fill:function(t){return a},transition:{r:function(t){return u(t)}}},update:{cx:function(t){return i},cy:function(t){return o},r:function(t){return u(t)},fill:function(t){return a}},exit:{r:function(t){return 0}},mouseover:function(t){Xa(ui(this),t,r,n,e)},mouseout:function(t){Ya(ui(this),t,r,n)},mouseclick:function(t){Ha(t,n)}}}(0,i,u,r),b=function(t,n,e,r){var i=function(t){return"word__circle-".concat(t.id)};return{shape:"circle",class:"word__circle",enter:{id:function(t){return i(t)},cx:function(t){return n.viz.width/2+t.x},cy:function(t){return n.viz.height/2+t.y},fill:function(t){return Ua(t,n,e)},fillOpacity:function(t){return Oa(t,n,e)},r:function(t){return e.freqRadius(t.freq)}},update:{id:function(t){return i(t)},cx:function(t){return n.viz.width/2+t.x},cy:function(t){return n.viz.height/2+t.y},fill:function(t){return Ua(t,n,e)},fillOpacity:function(t){return Oa(t,n,e)},r:function(t){return e.freqRadius(t.freq)}},exit:{x:function(t){return n.viz.width/2},y:function(t){return n.viz.height/2},r:0},mouseover:function(t){Xa(ui(this),t,r,n,e)},mouseout:function(t){Ya(ui(this),t,r,n)},mouseclick:function(t){Ha(t,n)}}}(0,i,u,r);r.drawShape([o.mainWord],w,t),r.drawShape(m,b,t)}if(i.text.show){var M=function(t,n,e,r){var i=function(t){return n.circle.includeMainWord?e.fontSize(t.freq):e.fontSize.range()[1]};return{shape:"text",class:"main-word__text",enter:{x:function(t){return n.viz.width/2},y:function(t){return n.viz.height/2},fill:function(t){return n.text.color},fontFamily:function(t){return n.text.font},textAnchor:function(t){return"middle"},alignmentBaseline:function(t){return"middle"},cursor:function(t){return"pointer"},text:function(t){return t.text},transition:{fontSize:function(t){return i(t)}}},update:{fontSize:function(t){return i(t)},text:function(t){return t.text}},exit:{opacity:function(t){return 0}},mouseover:function(t){ja(ui(this),t,r,n,e)},mouseout:function(t){Fa(ui(this),t,r,n)},mouseclick:function(t){Ba(t,n)}}}(0,i,u,r),z=function(t,n,e,r){var i=function(t){return"word__text-".concat(t.id)};return{shape:"text",class:"word__text",enter:{id:function(t){return i(t)},x:function(t){return n.viz.width/2+t.x},y:function(t){return n.viz.height/2+t.y},fill:function(t){return n.text.color},fontSize:function(t){return e.fontSize(t.freq)},fontFamily:function(t){return n.text.font},textAnchor:function(t){return"middle"},alignmentBaseline:function(t){return"middle"},cursor:function(t){return"pointer"},opacity:function(t){return 1},text:function(t){return t.text}},update:{id:function(t){return i(t)},x:function(t){return n.viz.width/2+t.x},y:function(t){return n.viz.height/2+t.y},fontSize:function(t){return e.fontSize(t.freq)},text:function(t){return t.text},r:function(t){return 0},opacity:function(t){return 1}},exit:{x:function(t){return n.viz.width/2},y:function(t){return n.viz.height/2},fontSize:function(t){return 0},opacity:function(t){return 0}},mouseover:function(t){ja(ui(this),t,r,n,e)},mouseout:function(t){Fa(ui(this),t,r,n)},mouseclick:function(t){Ba(t,n)}}}(0,i,u,r);r.drawShape([o.mainWord],M,t),r.drawShape(m,z,t)}}function f(t,n){var e,r=Object.assign({},t);i.category.show&&((i.category.items||i.category.showItems)&&(r=function(t){var n={},e=[];return t.words.forEach(function(t,n){var r=!1;if(t.length){var o=t[0].category.name,a=!!i.category.items&&i.category.items.find(function(t){return t.name===o}),u=!!a&&a.show,s=!!i.category.showItems&&i.category.showItems.includes(n);(u||s)&&(r=!0)}r&&e.push(t)}),n.mainWord=Object.assign({},t.mainWord),n.words=e,n}(t)),a=function(t){var n=i.category.strokeWidth/200,e=xa().sort(null).value(function(t){var n=1;return i.category.differentAngles&&(n=t.reduce(function(t,n){return t+n.freq},0)),n});return e.startAngle(Math.PI/4).endAngle(2*Math.PI+Math.PI/4).padAngle(n),e(t)}(r.words)),o=function(t){var n={},e=[];return t.words.forEach(function(t,n){var r=[];t.sort(function(t,n){return n.score-t.score});var o=t;i.viz.maxItems&&(o=t.slice(0,i.viz.maxItems)),o.forEach(function(t){var e=Object.assign({},t);if(a){var i=Object.assign({},e.category);e.category=a[n],e.category.freq=i.freq,e.category.name=i.name,e.category.text=i.text,e.category.score=i.score}r.push(e)}),e.push(r)}),n.mainWord=Object.assign({},t.mainWord),n.words=e,n}(r),function(){var t=at(Oo(o,"freq",i.circle.includeMainWord)),n=i.circle.scale?i.circle.size:[i.circle.size[0],i.circle.size[0]];u.freqRadius=gn().domain(t).range(n);var e=i.text.scale?i.text.size:[i.text.size[0],i.text.size[0]];u.fontSize=pn().domain(t).range(e);var r=at(Oo(o,"score",!1)),a=i.circle.includeMainWord?1.75*u.freqRadius(t[1]):i.circle.spaceAroundCentre;u.scoreRadius=pn().domain(r).range([i.viz.width/2,a]),u.scoreColor=pn().domain(r).range(i.circle.color),u.scoreOpacity=pn().domain(r).range([.3,1])}(),e=ui("body").append("svg"),o.words.forEach(function(t){t.forEach(function(t){t.size=c(t,e)})}),o.mainWord.size=c(o.mainWord,e),e.remove(),l(n)}return function(t,n){r=oo(),i=yr(hu,n),f(t,!0)}(t,n),{_svg:e,_data:o,_scale:u,_params:i,update:function(t){f(t,!1)}}};e.d(n,"OppositeViz",function(){return so}),e.d(n,"RadialViz",function(){return yu}),e.d(n,"parseURL",function(){return Uo}),e.d(n,"parseData",function(){return Lo}),e.d(n,"range",function(){return Oo}),e.d(n,"allWords",function(){return Wo})}])});
//# sourceMappingURL=ske-viz.min.js.map